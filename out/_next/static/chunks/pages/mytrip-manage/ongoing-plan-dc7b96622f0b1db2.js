try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="bd180bae-9dce-4427-a677-c9a134899930",e._sentryDebugIdIdentifier="sentry-dbid-bd180bae-9dce-4427-a677-c9a134899930")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[873],{54657:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/mytrip-manage/ongoing-plan",function(){return s(90414)}])},90414:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var a=s(74848),n=s(77213),l=s(37452),i=s(81308),d=s(51664),r=s(80828),c=s(91553),u=s(24880),o=s(96540),g=s(86715),x=s(85692);function y(){let e=(0,g.useRouter)(),[t,s]=(0,o.useState)(!1),[y,f]=(0,o.useState)(null),{ref:h,inView:p}=(0,x.Wx)();(0,o.useEffect)(()=>{let e=localStorage.getItem("accessToken");e?f(e):s(!0)},[]);let{data:b,fetchNextPage:N,hasNextPage:m,isFetchingNextPage:P}=(0,c.q)({queryKey:["ongoingPlans",{status:["PENDING","CONFIRMED"]}],initialPageParam:1,queryFn:e=>{let{pageParam:t=1}=e;return r.A.getPlanList({status:["PENDING","CONFIRMED"],page:t,pageSize:5})},getNextPageParam:(e,t)=>5===e.list.length?t.length+1:void 0,enabled:!!y,placeholderData:u.rX});(0,o.useEffect)(()=>{p&&m&&N()},[p,N,m]);let _=(null==b?void 0:b.pages.map(e=>e.list).flat())||[];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.A,{"data-sentry-element":"MyPlanNav","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(l.A,{bodyClass:"bg-gray","data-sentry-element":"Layout","data-sentry-source-file":"index.tsx",children:(0,a.jsx)(i.A,{title:"진행 중인",status:"ongoing",visiblePlans:_,fetchNextPage:N,hasNextPage:m,isFetchingNextPage:P,"data-sentry-element":"MyPlanList","data-sentry-source-file":"index.tsx"})}),(0,a.jsx)("div",{ref:h,className:"h-10",children:P&&(0,a.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,a.jsx)("span",{children:"플랜을 불러오는 중..."})})}),t&&(0,a.jsxs)(d.A,{label:"로그인 필요",closeModal:()=>s(!1),children:[(0,a.jsx)("p",{className:"text-lg",children:"로그인이 필요한 서비스입니다."}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end space-x-4",children:[(0,a.jsx)("button",{className:"px-4 py-2 text-gray-500",onClick:()=>{s(!1),e.push("/")},children:"취소"}),(0,a.jsx)("button",{className:"rounded-lg bg-blue-500 px-4 py-2 text-white",onClick:()=>{s(!1),e.push("/login")},children:"확인"})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[507,636,593,792],()=>t(54657)),_N_E=e.O()}]);