(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[873],{54657:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/mytrip-manage/ongoing-plan",function(){return a(43051)}])},43051:(e,t,a)=>{"use strict";a.r(t),a.d(t,{OngoingPlan:()=>P,default:()=>f});var s=a(74848),n=a(42900),l=a(51761),i=a(11739),r=a(1997),g=a(91553),c=a(24880),u=a(96540),o=a(85692),N=a(29965),d=a.n(N),h=a(5279);function P(){let[e,t]=(0,u.useState)(null),{ref:a,inView:N}=(0,o.Wx)();(0,u.useEffect)(()=>{let e=localStorage.getItem("accessToken");e&&t(e)},[]);let{data:P,fetchNextPage:f,hasNextPage:x,isFetchingNextPage:_,isLoading:p}=(0,g.q)({queryKey:["ongoingPlans",{status:["PENDING","CONFIRMED"]}],initialPageParam:1,queryFn:e=>{let{pageParam:t=1}=e;return r.A.getPlanList({status:["PENDING","CONFIRMED"],page:t,pageSize:5})},getNextPageParam:(e,t)=>5===e.list.length?t.length+1:void 0,enabled:!!e,placeholderData:c.rX});(0,u.useEffect)(()=>{N&&x&&f()},[N,f,x]);let E=(null==P?void 0:P.pages.map(e=>e.list).flat())||[];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.A,{}),(0,s.jsx)(l.A,{bodyClass:"bg-gray",children:(0,s.jsx)(i.A,{title:"진행 중인",status:"ongoing",visiblePlans:E,fetchNextPage:f,hasNextPage:x,isFetchingNextPage:_,isLoading:p})}),(0,s.jsx)("div",{ref:a,className:"h-10",children:_&&(0,s.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,s.jsx)(d(),{src:h.A,alt:"로딩 중"})})})]})}let f=(0,a(4107).A)(P)}},e=>{var t=t=>e(e.s=t);e.O(0,[375,636,593,792],()=>t(54657)),_N_E=e.O()}]);