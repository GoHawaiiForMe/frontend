(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{95461:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return a(46603)}])},5279:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r={src:"/_next/static/media/icon_loading.05325840.gif",height:45,width:256,blurWidth:0,blurHeight:0}},86491:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});var r=a(74848);let t=e=>{let{label:s,onClick:a,disabled:t=!1,className:l="",type:o="button"}=e;return(0,r.jsx)("button",{type:o,className:"bold w-full rounded-2xl bg-color-blue-300 py-4 text-xl hover:scale-[1.01] mobile-tablet:text-lg ".concat(t?"cursor-not-allowed bg-color-gray-100":"bg-color-blue-300"," ").concat(l),onClick:a,disabled:t,children:s})}},56534:(e,s,a)=>{"use strict";a.d(s,{A:()=>g});var r=a(77528),t=a(4418),l=a(74848),o=a(96540),i=a(29965),n=a.n(i);let c={src:"/_next/static/media/icon_visibility_off.42d25702.svg",height:24,width:24,blurWidth:0,blurHeight:0},d={src:"/_next/static/media/icon_visibility_on.695d99be.svg",height:24,width:24,blurWidth:0,blurHeight:0},m=(0,o.forwardRef)((e,s)=>{var{label:a,type:i,name:m,value:g,onChange:h,placeholder:u="",className:x="",error:p=!1}=e,w=(0,t._)(e,["label","type","name","value","onChange","placeholder","className","error"]);let[b,f]=o.useState(!1),v="textarea"===i?(0,l.jsx)("textarea",(0,r._)({ref:s,name:m,value:g,onChange:h,placeholder:u,className:"mb-4 h-40 w-full resize-none rounded-xl border bg-color-gray-50 p-4 ".concat(x)},w)):"password"===i?(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",(0,r._)({ref:s,type:b?"text":"password",name:m,value:g,onChange:h,placeholder:u,className:"h-16 w-full rounded-xl border p-4 pc:text-xl mobile-tablet:text-lg ".concat(p?"border-color-red-200":"border-color-blue-300"," ").concat(x)},w)),(0,l.jsx)(n(),{src:b?d:c,onClick:()=>{f(e=>!e)},width:24,height:24,alt:b?"비밀번호 보기":"비밀번호 감추기",className:"absolute right-5 top-1/2 -translate-y-1/2 transform cursor-pointer"})]}):(0,l.jsx)("input",(0,r._)({ref:s,className:"h-16 w-full rounded-xl border p-4 pc:text-xl mobile-tablet:text-lg ".concat(p?"border-color-red-200":"border-color-blue-300"," ").concat(x),type:i,name:m,value:g,onChange:h,placeholder:u},w));return(0,l.jsxs)("div",{children:[a&&(0,l.jsx)("label",{className:"semibold mb-4 block pc:text-xl mobile-tablet:text-lg",htmlFor:m,children:a}),v]})});m.displayName="Input";let g=m},64574:(e,s,a)=>{"use strict";a.d(s,{A:()=>d});var r=a(74848),t=a(29965),l=a.n(t);let o={src:"/_next/static/media/icon_google.879cad24.svg",height:72,width:72,blurWidth:0,blurHeight:0},i={src:"/_next/static/media/icon_kakao.8daf5231.svg",height:72,width:72,blurWidth:0,blurHeight:0},n={src:"/_next/static/media/icon_naver.b1be86b3.svg",height:72,width:72,blurWidth:0,blurHeight:0};var c=a(62294);let d=()=>{let e=async e=>{try{let s;switch(e){case"google":s=await c.A.googleLogin();break;case"kakao":s=await c.A.kakaoLogin();break;case"naver":s=await c.A.naverLogin();break;default:throw Error("지원하지 않는 로그인 방식입니다.")}window.location.href=s}catch(s){console.error("".concat(e," 로그인 중 오류 발생"),s),alert("".concat(e," 로그인에 실패했습니다. 다시 시도해주세요."))}};return(0,r.jsxs)("div",{className:"flex flex-col items-center gap-8",children:[(0,r.jsx)("h2",{className:"text-color-black-200 tablet:text-xs pc:text-xl",children:"SNS 계정으로 간편 가입하기"}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)("div",{onClick:()=>e("google"),className:"cursor-pointer",children:(0,r.jsx)(l(),{src:o,alt:"구글 아이콘",width:50,height:50,className:"hover:scale-110"})}),(0,r.jsx)("div",{onClick:()=>e("kakao"),className:"cursor-pointer",children:(0,r.jsx)(l(),{src:i,alt:"카카오 아이콘",width:50,height:50,className:"hover:scale-110"})}),(0,r.jsx)("div",{onClick:()=>e("naver"),className:"cursor-pointer",children:(0,r.jsx)(l(),{src:n,alt:"네이버 아이콘",width:50,height:50,className:"hover:scale-110"})})]})]})}},46603:(e,s,a)=>{"use strict";a.r(s),a.d(s,{LoginPage:()=>k,default:()=>P});var r=a(74848),t=a(77528),l=a(55456),o=a(23504),i=a(56534),n=a(86491),c=a(91106),d=a.n(c),m=a(29965),g=a.n(m),h=a(56616),u=a(28871),x=a(49785),p=a(20812),w=a(79241),b=a(86715),f=a(82309),v=a(62294),j=a(64574);let N=async()=>await w.A.getUserInfo(),_=async()=>await w.A.getProfileInfo(),y=async e=>v.A.login(e);function z(){let e=(0,b.useRouter)(),{setLogin:s}=(0,o.A)(),a=(0,f.n)({mutationFn:y,onSuccess:async()=>{try{let a=await N(),r=await _();s(a.nickName,a.role,a.coconut,a.email,a.phoneNumber,r.image),e.replace("/"),e.reload()}catch(e){console.error("유저 정보 가져오기 실패",e)}},onError:e=>{e.response?alert(e.message):e.request?console.error(e.request):console.error(e.message)}}),{register:c,handleSubmit:m,watch:w,formState:{errors:v}}=(0,x.mN)({resolver:(0,u.u)(p.X5),mode:"onBlur"}),z=Object.values(w()).every(e=>(null==e?void 0:e.toString().trim())!==""),k=e=>{let{message:s}=e;return(0,r.jsx)("p",{className:"absolute right-0 mt-1 text-color-red-200",children:s})};return(0,r.jsx)("div",{className:"my-24 flex justify-center",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-8 pc:w-[640px] mobile-tablet:w-[372px]",children:[(0,r.jsx)(g(),{src:h.A,width:400,height:400,alt:"로고",className:"hover:scale-95"}),(0,r.jsxs)("form",{className:"relative flex w-full flex-col gap-8",onSubmit:m(e=>{a.mutate(e)}),children:[(0,r.jsxs)("div",{className:"mb-2",children:[(0,r.jsx)(i.A,(0,l._)((0,t._)({},c("email")),{placeholder:"이메일을 입력해 주세요",type:"text",label:"이메일",error:!!v.email})),v.email&&(0,r.jsx)(k,{message:v.email.message})]}),(0,r.jsxs)("div",{className:"mb-2",children:[(0,r.jsx)(i.A,(0,l._)((0,t._)({},c("password")),{placeholder:"비밀번호를 입력해 주세요",type:"password",label:"비밀번호",error:!!v.password})),v.password&&(0,r.jsx)(k,{message:v.password.message})]}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(n.A,{label:"로그인",type:"submit",disabled:!z,className:"text-color-gray-50"})})]}),(0,r.jsxs)("div",{className:"mb-10 flex justify-center pc:text-xl",children:[(0,r.jsx)("p",{className:"mr-2 text-lg text-color-black-200 mobile-tablet:text-xs",children:"아직 니가가라하와이 회원이 아니신가요?"}),(0,r.jsx)(d(),{href:"/signup",className:"semibold text-lg text-color-blue-300 underline hover:scale-105 mobile-tablet:text-xs",children:"이메일로 회원가입하기"})]}),(0,r.jsx)(j.A,{})]})})}function k(){return(0,r.jsx)(z,{})}let P=(0,a(4107).A)(k)},4107:(e,s,a)=>{"use strict";a.d(s,{A:()=>g});var r=a(77528),t=a(74848),l=a(96540),o=a(86715),i=a(12828),n=a(5279),c=a(29965),d=a.n(c),m=a(23504);let g=(e,s)=>a=>{let c=(0,o.useRouter)(),[g,h]=(0,l.useState)(null),[u,x]=(0,l.useState)(!0),{role:p}=(0,m.A)();return((0,l.useEffect)(()=>{let e=(0,i.iD)();if(e){if("/login"===c.pathname||"/signup"===c.pathname){c.push("/");return}if(s){let e=Array.isArray(s)?s:[s];if("guest"!==p&&!e.includes(p)){c.push("/");return}}h(e)}else"/login"!==c.pathname&&"/signup"!==c.pathname&&c.push("/login");x(!1)},[c,p,s]),u)?(0,t.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,t.jsx)(d(),{src:n.A,alt:"로딩 중"})}):g||"/login"===c.pathname||"/signup"===c.pathname?(0,t.jsx)(e,(0,r._)({},a)):null}},20812:(e,s,a)=>{"use strict";a.d(s,{GU:()=>i,Mh:()=>o,Sd:()=>l,X5:()=>t,dr:()=>n});var r=a(14476);let t=r.z.object({email:r.z.string().min(1,"이메일을 입력해 주세요.").email("이메일 형식이 아닙니다."),password:r.z.string().nonempty("비밀번호를 입력해 주세요.").min(6,"비밀번호는 최소 6자 이상이어야 합니다.")}),l=r.z.object({nickName:r.z.string().min(1,{message:"닉네임을 입력해 주세요."}),email:r.z.string().min(1,{message:"이메일을 입력해 주세요."}).email({message:"이메일 형식이 아닙니다."}),phoneNumber:r.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),password:r.z.string().min(6,"비밀번호는 최소 6자 이상이어야 합니다."),confirmPassword:r.z.string().min(1,{message:"비밀번호 확인란을 입력해 주세요."}),role:r.z.enum(["MAKER","DREAMER"],{message:"역할을 선택해 주세요."})}).refine(e=>e.password===e.confirmPassword,{path:["confirmPassword"],message:"비밀번호가 일치하지 않습니다."}),o=r.z.object({nickName:r.z.string().min(1,{message:"닉네임을 입력해 주세요."}),email:r.z.string().min(1,{message:"이메일을 입력해 주세요."}),phoneNumber:r.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),password:r.z.string().optional(),newPassword:r.z.string().optional(),newConfirmPassword:r.z.string().optional(),selectedServices:r.z.array(r.z.string()).optional(),selectedLocations:r.z.array(r.z.string()).optional()}).superRefine((e,s)=>{(e.newPassword||e.newConfirmPassword)&&(e.password||s.addIssue({code:"custom",path:["password"],message:"현재 비밀번호를 입력해 주세요."}),e.newPassword&&e.newPassword.length<6&&s.addIssue({code:"custom",path:["newPassword"],message:"새 비밀번호는 최소 6자 이상이어야 합니다."}),e.newPassword!==e.newConfirmPassword&&s.addIssue({code:"custom",path:["newConfirmPassword"],message:"새 비밀번호가 일치하지 않습니다."}))}),i=r.z.object({nickName:r.z.string().min(1,{message:"닉네임을 입력해 주세요."}),email:r.z.string().min(1,{message:"이메일을 입력해 주세요."}),phoneNumber:r.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),password:r.z.string().optional(),newPassword:r.z.string().optional(),newConfirmPassword:r.z.string().optional()}).refine(e=>!e.newPassword||e.password,{path:["password"],message:"새 비밀번호를 설정하려면 현재 비밀번호를 입력해 주세요."}).refine(e=>!e.newPassword||e.newPassword.length>=6,{path:["newPassword"],message:"새 비밀번호는 최소 6자 이상이어야 합니다."}).refine(e=>!e.newPassword||e.newPassword===e.newConfirmPassword,{path:["newConfirmPassword"],message:"새 비밀번호가 일치하지 않습니다."}),n=r.z.object({nickName:r.z.string().min(1,{message:"닉네임을 입력해 주세요."}),phoneNumber:r.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),role:r.z.enum(["MAKER","DREAMER"],{message:"역할을 선택해 주세요."})})}},e=>{var s=s=>e(e.s=s);e.O(0,[106,636,593,792],()=>s(95461)),_N_E=e.O()}]);