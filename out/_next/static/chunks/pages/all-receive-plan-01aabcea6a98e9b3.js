(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[895],{7329:(e,s,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/all-receive-plan",function(){return l(40937)}])},40937:(e,s,l)=>{"use strict";l.r(s),l.d(s,{AllReceivePlan:()=>w,default:()=>_});var t=l(74848),a=l(29965),i=l.n(a),c=l(42897),r=l(93708),n=l(68264),d=l(41540),o=l(3886),x=l(96540),u=l(98649),m=l(70539),h=l(13814),p=l(82521),j=l(91553),v=l(24880),f=l(98599),b=l(85692),g=l(85030),N=l(91106),y=l.n(N),A=l(4107),S=l(5279);function w(){var e;let[s,l]=(0,x.useState)(!1),[a,N]=(0,x.useState)(!1),[A,w]=(0,x.useState)(!1),[_,k]=(0,x.useState)("SCHEDULE_FIRST"),[E,T]=(0,x.useState)(""),[M,P]=(0,x.useState)(""),[C,q]=(0,x.useState)([]),[R,X]=(0,x.useState)(null),{ref:D,inView:F}=(0,b.Wx)(),{data:K,isLoading:O,fetchNextPage:z,hasNextPage:B,isFetchingNextPage:H,isFetching:I}=(0,j.q)({queryKey:["receiveRequest",{isAssigned:!1,tripType:C,keyword:M,orderBy:_}],initialPageParam:1,queryFn:e=>{let{pageParam:s=1}=e;return(0,f.Ay)({isAssigned:!1,tripType:C.length>0?C:void 0,keyword:M||void 0,orderBy:_,page:s,pageSize:5})},getNextPageParam:(e,s)=>5===e.list.length?s.length+1:void 0,placeholderData:v.rX});(0,x.useEffect)(()=>{F&&B&&z()},[F,z,B]);let L=(null==K?void 0:null===(e=K.pages[0])||void 0===e?void 0:e.totalCount)||0,Q=(null==K?void 0:K.pages.flatMap(e=>e.list))||[],U=e=>{X(e),N(!0)},W=()=>{w(!0)};return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"mx-[auto] w-full mobile:mx-[auto] tablet:mx-[auto]",children:(0,t.jsxs)("div",{className:"mb-8 flex items-center gap-8 border-b border-color-line-200",children:[(0,t.jsx)(y(),{href:"/receive",children:(0,t.jsx)("p",{className:"text-4 cursor-pointer semibold",children:"받은 견적 요청"})}),(0,t.jsx)(y(),{href:"/all-receive-plan",children:(0,t.jsx)("p",{className:"text-4 cursor-pointer border-b-[3px] border-black py-6 semibold",children:"전체 플랜"})})]})}),(0,t.jsxs)("div",{className:"flex gap-[107px]",children:[(0,t.jsx)(c.A,{data:null==K?void 0:K.pages[0],setSelectedTypes:q}),(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsx)(p.A,{value:E,onChange:e=>{T(e.target.value),""===e.target.value&&P("")},onSearch:e=>{T(e),P(e)}}),(0,t.jsxs)("div",{className:"mb-8 mt-4 flex w-full items-center justify-between mobile:mx-[auto] tablet:mx-[auto]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("p",{className:"semibold",children:["전체 ",L," 건"]}),I&&!O&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-blue-500",children:[(0,t.jsx)("div",{className:"h-2 w-2 animate-pulse rounded-full bg-blue-500"}),(0,t.jsx)("span",{className:"text-sm",children:"필터링 중..."})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-[4px]",children:[(0,t.jsx)(r.A,{onSort:k,currentSort:_}),(0,t.jsx)(i(),{src:d.A,className:"pc:hidden mobile-tablet:block",alt:"filter",width:32,height:32,onClick:()=>l(!0)})]})]}),O?(0,t.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,t.jsx)(i(),{src:S.A,alt:"로딩 중"})}):(0,t.jsxs)("div",{className:"transition-opacity duration-300 ".concat(I?"opacity-60":"opacity-100"),children:[Q.length>0?Q.map((e,s)=>(0,t.jsx)("div",{className:"transform transition-all duration-300 hover:scale-[1.01]",children:(0,t.jsx)(n.A,{data:e,onSendQuotation:()=>U(e.id),onReject:W,oneButton:!0})},"".concat(e.id,"-").concat(s))):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,t.jsx)(i(),{src:g.A,alt:"request_empty",width:300,height:300}),(0,t.jsx)("p",{className:"text-xl semibold text-color-gray-300",children:"아직 받은 요청이 없어요!"})]}),(0,t.jsx)("div",{ref:D,className:"h-10",children:H&&(0,t.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,t.jsx)("span",{children:"더 불러오는 중..."})})})]})]})]}),s&&(0,t.jsx)(o.A,{closeModal:()=>l(!1),data:null==K?void 0:K.pages[0],selectedTypes:C,setSelectedTypes:q}),a&&(0,t.jsx)(m.A,{label:"견적 보내기",closeModal:()=>N(!1),children:(0,t.jsx)(u.A,{data:Q.find(e=>e.id===R),closeModal:()=>N(!1)})}),A&&(0,t.jsx)(m.A,{label:"요청 반려하기",closeModal:()=>w(!1),children:(0,t.jsx)(h.A,{data:Q.find(e=>e.id===R),closeModal:()=>w(!1)})})]})}let _=(0,A.A)(w,"MAKER")}},e=>{var s=s=>e(e.s=s);e.O(0,[128,577,636,593,792],()=>s(7329)),_N_E=e.O()}]);