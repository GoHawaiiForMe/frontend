(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[967],{97436:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/maker/edit/informEdit",function(){return a(82778)}])},5279:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r={src:"/_next/static/media/icon_loading.05325840.gif",height:45,width:256,blurWidth:0,blurHeight:0}},86491:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});var r=a(74848);let l=e=>{let{label:s,onClick:a,disabled:l=!1,className:o="",type:t="button"}=e;return(0,r.jsx)("button",{type:t,className:"bold w-full rounded-2xl bg-color-blue-300 py-4 text-xl hover:scale-[1.01] mobile-tablet:text-lg ".concat(l?"cursor-not-allowed bg-color-gray-100":"bg-color-blue-300"," ").concat(o),onClick:a,disabled:l,children:s})}},56534:(e,s,a)=>{"use strict";a.d(s,{A:()=>c});var r=a(74848),l=a(96540),o=a(29965),t=a.n(o);let n={src:"/_next/static/media/icon_visibility_off.7dedf543.svg",height:24,width:24,blurWidth:0,blurHeight:0},i={src:"/_next/static/media/icon_visibility_on.6f9063a3.svg",height:24,width:24,blurWidth:0,blurHeight:0},d=(0,l.forwardRef)((e,s)=>{let{label:a,type:o,name:d,value:c,onChange:m,placeholder:u="",className:b="",error:p=!1,...g}=e,[h,w]=l.useState(!1),x="textarea"===o?(0,r.jsx)("textarea",{ref:s,name:d,value:c,onChange:m,placeholder:u,className:"mb-4 h-40 w-full resize-none rounded-xl border bg-color-gray-50 p-4 ".concat(b),...g}):"password"===o?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{ref:s,type:h?"text":"password",name:d,value:c,onChange:m,placeholder:u,className:"h-16 w-full rounded-xl border p-4 pc:text-xl mobile-tablet:text-lg ".concat(p?"border-color-red-200":"border-color-blue-300"," ").concat(b),...g}),(0,r.jsx)(t(),{src:h?i:n,onClick:()=>{w(e=>!e)},width:24,height:24,alt:h?"비밀번호 보기":"비밀번호 감추기",className:"absolute right-5 top-1/2 -translate-y-1/2 transform cursor-pointer"})]}):(0,r.jsx)("input",{ref:s,className:"h-16 w-full rounded-xl border p-4 pc:text-xl mobile-tablet:text-lg ".concat(p?"border-color-red-200":"border-color-blue-300"," ").concat(b),type:o,name:d,value:c,onChange:m,placeholder:u,...g});return(0,r.jsxs)("div",{children:[a&&(0,r.jsx)("label",{className:"semibold mb-4 block pc:text-xl mobile-tablet:text-lg",htmlFor:d,children:a}),x]})});d.displayName="Input";let c=d},82778:(e,s,a)=>{"use strict";a.r(s),a.d(s,{ProfileEditDreamerPage:()=>N,default:()=>f});var r=a(74848),l=a(49785),o=a(28871),t=a(56534),n=a(20812),i=a(86491),d=a(96540),c=a(79241),m=a(86715),u=a(23504),b=a(97286),p=a(82309),g=a(62294);let h=async()=>await c.A.getUserInfo(),w=async e=>c.A.patchBasicInfo(e);function x(){let{register:e,handleSubmit:s,watch:a,setValue:c,setError:x,formState:{errors:N}}=(0,l.mN)({resolver:(0,o.u)(n.GU),mode:"onBlur"}),f=(0,m.useRouter)(),{setLogin:v}=(0,u.A)(),[j,k]=(0,d.useState)(!1),[y,P]=(0,d.useState)(null),{data:z,isLoading:A,isError:C,refetch:_}=(0,b.I)({queryKey:["userInfo"],queryFn:h}),E=(0,p.n)({mutationFn:w,onSuccess:()=>{alert("프로필이 성공적으로 수정되었습니다!"),_()},onError:e=>{alert(e.message)}}),R=!!(null==z?void 0:z.email),S=async e=>{if(A||C){alert("사용자 정보를 불러오는 중입니다.");return}let s={nickName:(null==z?void 0:z.nickName)!==e.nickName?e.nickName:null==z?void 0:z.nickName,phoneNumber:(null==z?void 0:z.phoneNumber)!==e.phoneNumber?e.phoneNumber:null==z?void 0:z.phoneNumber,password:e.password?e.password:void 0,newPassword:e.newPassword||void 0};E.mutate(s),(null==z?void 0:z.nickName)!==e.nickName&&v(e.nickName,(null==z?void 0:z.role)||"guest",(null==z?void 0:z.coconut)||0,null==z?void 0:z.email,null==z?void 0:z.phoneNumber)},I=async()=>{let e=M.nickName;try{await g.A.checkNickName({nickName:e})?(k(!0),P("사용 가능한 닉네임입니다!")):(k(!1),(null==z?void 0:z.nickName)===e?x("nickName",{message:"현재 닉네임과 동일합니다."}):x("nickName",{message:"닉네임이 중복되었습니다!"}),P(""))}catch(e){x("nickName",{message:"닉네임 체크 중 오류가 발생했습니다."}),k(!1),alert(e.message)}},M=a(),D=(()=>{var e;let{nickName:s,phoneNumber:a,password:r,newPassword:l,newConfirmPassword:o}=M,t=(null==r?void 0:r.trim())!==""||!l,n=(null==l?void 0:l.trim())!==""&&l===o,i=(null==z?void 0:z.nickName)!==s||(null==z?void 0:z.phoneNumber)!==a,d=!!(null===(e=M.password)||void 0===e?void 0:e.trim());return t&&(i||d||n)})(),F=e=>{let{message:s}=e;return(0,r.jsx)("p",{className:"mt-2 text-color-red-200",children:s})};return(0,d.useEffect)(()=>{z&&(c("nickName",z.nickName),c("email",z.email),c("phoneNumber",z.phoneNumber))},[z,c]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h1",{className:"semibold mt-16 text-3xl",children:"기본정보 수정"}),(0,r.jsx)("div",{className:"my-8 h-0.5 bg-color-line-100"}),(0,r.jsxs)("form",{onSubmit:s(S),className:"w-full",children:[(0,r.jsxs)("div",{className:"grid w-full pc:grid-cols-2 pc:gap-16 mobile-tablet:flex mobile-tablet:flex-col mobile-tablet:gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(t.A,{type:"text",label:"닉네임",placeholder:"기존 닉네임",...e("nickName"),error:!!N.nickName,className:"border-0 bg-color-background-200"}),(0,r.jsx)("button",{type:"button",onClick:I,className:"bold absolute right-2 top-[60px] rounded-lg bg-color-blue-300 px-2 py-2 text-lg text-color-gray-50 mobile-tablet:top-[53px]",children:"닉네임 확인"}),N.nickName&&(0,r.jsx)(F,{message:N.nickName.message}),y&&(0,r.jsx)("p",{className:"text-color-blue-300",children:y})]}),(0,r.jsx)("div",{className:"my-4 h-0.5 bg-color-line-100"}),(0,r.jsx)("div",{children:(0,r.jsx)(t.A,{type:"text",label:"이메일",value:null==z?void 0:z.email,disabled:!0,placeholder:"[이메일과 비밀번호는 비활성화] 간편로그인 회원입니다. ",className:"border-0 bg-color-background-200 text-color-gray-300"})}),(0,r.jsx)("div",{className:"my-4 h-0.5 bg-color-line-100"}),(0,r.jsxs)("div",{className:"mb-16 mobile-tablet:m-0",children:[(0,r.jsx)(t.A,{type:"text",label:"전화번호",placeholder:"숫자만 입력해주세요",...e("phoneNumber"),error:!!N.phoneNumber,className:"border-0 bg-color-background-200"}),N.phoneNumber&&(0,r.jsx)(F,{message:N.phoneNumber.message})]}),(0,r.jsx)("div",{className:"h-0.5 bg-color-line-100 pc:hidden"})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)("div",{children:(0,r.jsx)(t.A,{type:"password",label:"현재 비밀번호",placeholder:"현재 비밀번호를 입력해 주세요",className:"overflow-hidden text-ellipsis whitespace-nowrap border-0 bg-color-background-200 pr-10",disabled:!R,...e("password")})}),(0,r.jsx)("div",{className:"my-4 h-0.5 bg-color-line-100"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(t.A,{type:"password",label:"새 비밀번호",placeholder:"비밀번호를 입력해 주세요",className:"overflow-hidden text-ellipsis whitespace-nowrap border-0 bg-color-background-200 pr-10",disabled:!R,...e("newPassword"),error:!!N.password}),N.password&&(0,r.jsx)(F,{message:N.password.message})]}),(0,r.jsx)("div",{className:"my-4 h-0.5 bg-color-line-100"}),(0,r.jsxs)("div",{className:"mb-16",children:[(0,r.jsx)(t.A,{type:"password",label:"새 비밀번호 확인",placeholder:"비밀번호를 다시 한번 입력해 주세요",className:"overflow-hidden text-ellipsis whitespace-nowrap border-0 bg-color-background-200 pr-10",disabled:!R,...e("newConfirmPassword"),error:!!N.newConfirmPassword}),N.newConfirmPassword&&(0,r.jsx)(F,{message:N.newConfirmPassword.message})]})]})]}),(0,r.jsxs)("div",{className:"grid gap-8 pb-16 pc:grid-cols-2 mobile-tablet:flex mobile-tablet:flex-col mobile-tablet:gap-4",children:[(0,r.jsx)(i.A,{type:"button",label:"취소",onClick:()=>{f.back()},className:"bold border border-color-blue-300 bg-color-gray-50 text-color-blue-300 mobile-tablet:order-2"}),(0,r.jsx)(i.A,{type:"submit",label:"수정하기",disabled:!D,className:"text-white mobile-tablet:order-1"})]})]})]})}function N(){return(0,r.jsx)(x,{})}let f=(0,a(4107).A)(N)},4107:(e,s,a)=>{"use strict";a.d(s,{A:()=>c});var r=a(74848),l=a(96540),o=a(86715),t=a(12828),n=a(5279),i=a(29965),d=a.n(i);let c=e=>s=>{let a=(0,o.useRouter)(),[i,c]=(0,l.useState)(null),[m,u]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{let e=(0,t.iD)();if(e){if("/login"===a.pathname||"/signup"===a.pathname){a.push("/");return}c(e)}else"/login"!==a.pathname&&"/signup"!==a.pathname&&a.push("/login");u(!1)},[a]),m)?(0,r.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,r.jsx)(d(),{src:n.A,alt:"로딩 중"})}):i||"/login"===a.pathname||"/signup"===a.pathname?(0,r.jsx)(e,{...s}):null}},20812:(e,s,a)=>{"use strict";a.d(s,{GU:()=>n,Mh:()=>t,Sd:()=>o,X5:()=>l,dr:()=>i});var r=a(14476);let l=r.z.object({email:r.z.string().min(1,"이메일을 입력해 주세요.").email("이메일 형식이 아닙니다."),password:r.z.string().nonempty("비밀번호를 입력해 주세요.").min(6,"비밀번호는 최소 6자 이상이어야 합니다.")}),o=r.z.object({nickName:r.z.string().min(1,{message:"닉네임을 입력해 주세요."}),email:r.z.string().min(1,{message:"이메일을 입력해 주세요."}).email({message:"이메일 형식이 아닙니다."}),phoneNumber:r.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),password:r.z.string().min(6,"비밀번호는 최소 6자 이상이어야 합니다."),confirmPassword:r.z.string().min(1,{message:"비밀번호 확인란을 입력해 주세요."}),role:r.z.enum(["MAKER","DREAMER"],{message:"역할을 선택해 주세요."})}).refine(e=>e.password===e.confirmPassword,{path:["confirmPassword"],message:"비밀번호가 일치하지 않습니다."}),t=r.z.object({nickName:r.z.string().min(1,{message:"닉네임을 입력해 주세요."}),email:r.z.string().min(1,{message:"이메일을 입력해 주세요."}),phoneNumber:r.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),password:r.z.string().optional(),newPassword:r.z.string().optional(),newConfirmPassword:r.z.string().optional(),selectedServices:r.z.array(r.z.string()).optional(),selectedLocations:r.z.array(r.z.string()).optional()}).superRefine((e,s)=>{(e.newPassword||e.newConfirmPassword)&&(e.password||s.addIssue({code:"custom",path:["password"],message:"현재 비밀번호를 입력해 주세요."}),e.newPassword&&e.newPassword.length<6&&s.addIssue({code:"custom",path:["newPassword"],message:"새 비밀번호는 최소 6자 이상이어야 합니다."}),e.newPassword!==e.newConfirmPassword&&s.addIssue({code:"custom",path:["newConfirmPassword"],message:"새 비밀번호가 일치하지 않습니다."}))}),n=r.z.object({nickName:r.z.string().min(1,{message:"닉네임을 입력해 주세요."}),email:r.z.string().min(1,{message:"이메일을 입력해 주세요."}),phoneNumber:r.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),password:r.z.string().optional(),newPassword:r.z.string().optional(),newConfirmPassword:r.z.string().optional()}).refine(e=>!e.newPassword||e.password,{path:["password"],message:"새 비밀번호를 설정하려면 현재 비밀번호를 입력해 주세요."}).refine(e=>!e.newPassword||e.newPassword.length>=6,{path:["newPassword"],message:"새 비밀번호는 최소 6자 이상이어야 합니다."}).refine(e=>!e.newPassword||e.newPassword===e.newConfirmPassword,{path:["newConfirmPassword"],message:"새 비밀번호가 일치하지 않습니다."}),i=r.z.object({nickName:r.z.string().min(1,{message:"닉네임을 입력해 주세요."}),phoneNumber:r.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),role:r.z.enum(["MAKER","DREAMER"],{message:"역할을 선택해 주세요."})})}},e=>{var s=s=>e(e.s=s);e.O(0,[106,636,593,792],()=>s(97436)),_N_E=e.O()}]);