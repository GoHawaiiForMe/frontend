try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="c074b7ae-9aac-4d45-941b-18afea94ab6f",e._sentryDebugIdIdentifier="sentry-dbid-c074b7ae-9aac-4d45-941b-18afea94ab6f")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[967],{97436:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/maker/edit/informEdit",function(){return a(87969)}])},64858:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});var r=a(74848);let t=e=>{let{label:s,onClick:a,disabled:t=!1,className:o="",type:n="button"}=e;return(0,r.jsx)("button",{type:n,className:"w-full py-4 bg-color-blue-300 bold rounded-2xl  text-xl mobile-tablet:text-lg ".concat(t?"bg-color-gray-100 cursor-not-allowed":"bg-color-blue-300"," ").concat(o),onClick:a,disabled:t,"data-sentry-component":"Button","data-sentry-source-file":"Button.tsx",children:s})}},72460:(e,s,a)=>{"use strict";a.d(s,{A:()=>m});var r=a(74848),t=a(96540),o=a(29965),n=a.n(o);let l={src:"/_next/static/media/icon_visibility_off.7dedf543.svg",height:24,width:24,blurWidth:0,blurHeight:0},i={src:"/_next/static/media/icon_visibility_on.6f9063a3.svg",height:24,width:24,blurWidth:0,blurHeight:0},d=(0,t.forwardRef)((e,s)=>{let{label:a,type:o,name:d,value:m,onChange:c,placeholder:u="",className:b="",error:p=!1,...g}=e,[h,w]=t.useState(!1),f="textarea"===o?(0,r.jsx)("textarea",{ref:s,name:d,value:m,onChange:c,placeholder:u,className:"mb-4 h-40 w-full resize-none rounded-xl border bg-color-gray-50 p-4 ".concat(b),...g}):"password"===o?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{ref:s,type:h?"text":"password",name:d,value:m,onChange:c,placeholder:u,className:"h-16 w-full rounded-xl border p-4 pc:text-xl mobile-tablet:text-lg ".concat(p?"border-color-red-200":"border-color-blue-300"," ").concat(b),...g}),(0,r.jsx)(n(),{src:h?i:l,onClick:()=>{w(e=>!e)},width:24,height:24,alt:h?"비밀번호 보기":"비밀번호 감추기",className:"absolute right-5 top-1/2 -translate-y-1/2 transform cursor-pointer"})]}):(0,r.jsx)("input",{ref:s,className:"h-16 w-full rounded-xl border p-4 pc:text-xl mobile-tablet:text-lg ".concat(p?"border-color-red-200":"border-color-blue-300"," ").concat(b),type:o,name:d,value:m,onChange:c,placeholder:u,...g});return(0,r.jsxs)("div",{children:[a&&(0,r.jsx)("label",{className:"semibold mb-4 block pc:text-xl mobile-tablet:text-lg",htmlFor:d,children:a}),f]})});d.displayName="Input";let m=d},87969:(e,s,a)=>{"use strict";a.r(s),a.d(s,{ProfileEditDreamerPage:()=>f,default:()=>x});var r=a(74848),t=a(49785),o=a(28871),n=a(72460),l=a(29917),i=a(64858),d=a(96540),m=a(69340),c=a(86715),u=a(41917),b=a(97286),p=a(82309);let g=async()=>await m.A.getUserInfo(),h=async e=>m.A.patchBasicInfo(e);function w(){let{register:e,handleSubmit:s,watch:a,setValue:m,formState:{errors:w}}=(0,t.mN)({resolver:(0,o.u)(l.GU),mode:"onBlur"}),f=(0,c.useRouter)(),{setLogin:x}=(0,u.A)(),{data:N,isLoading:y,isError:v,refetch:j}=(0,b.I)({queryKey:["userInfo"],queryFn:g}),k=(0,p.n)({mutationFn:h,onSuccess:()=>{alert("프로필이 성공적으로 수정되었습니다!"),j()},onError:e=>{var s;(null===(s=e.response)||void 0===s?void 0:s.status)===401?alert("기존 비밀번호를 확인해주세요."):(console.error("메이커 프로필 수정 실패",e),alert("수정 중 문제가 발생했습니다. 다시 시도해주세요."))}}),P=!!(null==N?void 0:N.email),z=async e=>{if(y||v){alert("사용자 정보를 불러오는 중입니다.");return}let s={nickName:(null==N?void 0:N.nickName)!==e.nickName?e.nickName:null==N?void 0:N.nickName,phoneNumber:(null==N?void 0:N.phoneNumber)!==e.phoneNumber?e.phoneNumber:null==N?void 0:N.phoneNumber,password:e.password?e.password:void 0,newPassword:e.newPassword||void 0};k.mutate(s),(null==N?void 0:N.nickName)!==e.nickName&&x(e.nickName,(null==N?void 0:N.role)||"guest",(null==N?void 0:N.coconut)||0,null==N?void 0:N.email,null==N?void 0:N.phoneNumber)},E=a(),I=(()=>{var e;let{nickName:s,phoneNumber:a,password:r,newPassword:t,newConfirmPassword:o}=E,n=(null==r?void 0:r.trim())!==""||!t,l=(null==t?void 0:t.trim())!==""&&t===o,i=(null==N?void 0:N.nickName)!==s||(null==N?void 0:N.phoneNumber)!==a,d=!!(null===(e=E.password)||void 0===e?void 0:e.trim());return n&&(i||d||l)})(),A=e=>{let{message:s}=e;return(0,r.jsx)("p",{className:"mt-2 text-color-red-200","data-sentry-component":"ErrorMessage","data-sentry-source-file":"InformEditMaker.tsx",children:s})};return(0,d.useEffect)(()=>{N&&(m("nickName",N.nickName),m("email",N.email),m("phoneNumber",N.phoneNumber))},[N,m]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h1",{className:"semibold mt-16 text-3xl",children:"기본정보 수정"}),(0,r.jsx)("div",{className:"my-8 h-0.5 bg-color-line-100"}),(0,r.jsxs)("form",{onSubmit:s(z),className:"w-full",children:[(0,r.jsxs)("div",{className:"grid w-full pc:grid-cols-2 pc:gap-16 mobile-tablet:flex mobile-tablet:flex-col mobile-tablet:gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(n.A,{type:"text",label:"닉네임",placeholder:"기존 닉네임",...e("nickName"),error:!!w.nickName,className:"border-0 bg-color-background-200","data-sentry-element":"Input","data-sentry-source-file":"InformEditMaker.tsx"}),w.nickName&&(0,r.jsx)(A,{message:w.nickName.message})]}),(0,r.jsx)("div",{className:"my-4 h-0.5 bg-color-line-100"}),(0,r.jsx)("div",{children:(0,r.jsx)(n.A,{type:"text",label:"이메일",value:null==N?void 0:N.email,disabled:!0,placeholder:"[이메일과 비밀번호는 비활성화] 간편로그인 회원입니다. ",className:"border-0 bg-color-background-200 text-color-gray-300","data-sentry-element":"Input","data-sentry-source-file":"InformEditMaker.tsx"})}),(0,r.jsx)("div",{className:"my-4 h-0.5 bg-color-line-100"}),(0,r.jsxs)("div",{className:"mb-16 mobile-tablet:m-0",children:[(0,r.jsx)(n.A,{type:"text",label:"전화번호",placeholder:"숫자만 입력해주세요",...e("phoneNumber"),error:!!w.phoneNumber,className:"border-0 bg-color-background-200","data-sentry-element":"Input","data-sentry-source-file":"InformEditMaker.tsx"}),w.phoneNumber&&(0,r.jsx)(A,{message:w.phoneNumber.message})]}),(0,r.jsx)("div",{className:"h-0.5 bg-color-line-100 pc:hidden"})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)("div",{children:(0,r.jsx)(n.A,{type:"password",label:"현재 비밀번호",placeholder:"현재 비밀번호를 입력해 주세요",className:"border-0 bg-color-background-200",disabled:!P,...e("password"),"data-sentry-element":"Input","data-sentry-source-file":"InformEditMaker.tsx"})}),(0,r.jsx)("div",{className:"my-4 h-0.5 bg-color-line-100"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(n.A,{type:"password",label:"새 비밀번호",placeholder:"비밀번호를 입력해 주세요",className:"border-0 bg-color-background-200",disabled:!P,...e("newPassword"),error:!!w.password,"data-sentry-element":"Input","data-sentry-source-file":"InformEditMaker.tsx"}),w.password&&(0,r.jsx)(A,{message:w.password.message})]}),(0,r.jsx)("div",{className:"my-4 h-0.5 bg-color-line-100"}),(0,r.jsxs)("div",{className:"mb-16",children:[(0,r.jsx)(n.A,{type:"password",label:"새 비밀번호 확인",placeholder:"비밀번호를 다시 한번 입력해 주세요",className:"border-0 bg-color-background-200",disabled:!P,...e("newConfirmPassword"),error:!!w.newConfirmPassword,"data-sentry-element":"Input","data-sentry-source-file":"InformEditMaker.tsx"}),w.newConfirmPassword&&(0,r.jsx)(A,{message:w.newConfirmPassword.message})]})]})]}),(0,r.jsxs)("div",{className:"grid gap-8 pb-16 pc:grid-cols-2 mobile-tablet:flex mobile-tablet:flex-col mobile-tablet:gap-4",children:[(0,r.jsx)(i.A,{type:"button",label:"취소",onClick:()=>{f.back()},className:"bold border border-color-blue-300 bg-color-gray-50 text-color-blue-300 mobile-tablet:order-2","data-sentry-element":"Button","data-sentry-source-file":"InformEditMaker.tsx"}),(0,r.jsx)(i.A,{type:"submit",label:"수정하기",disabled:!I,className:"text-white mobile-tablet:order-1","data-sentry-element":"Button","data-sentry-source-file":"InformEditMaker.tsx"})]})]})]})}function f(){return(0,r.jsx)(w,{"data-sentry-element":"InformEditMaker","data-sentry-component":"ProfileEditDreamerPage","data-sentry-source-file":"informEdit.tsx"})}let x=(0,a(26224).A)(f)},26224:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});var r=a(74848),t=a(96540),o=a(86715),n=a(2385);let l=e=>s=>{let a=(0,o.useRouter)(),[l,i]=(0,t.useState)(null),[d,m]=(0,t.useState)(!0);return((0,t.useEffect)(()=>{let e=(0,n.iD)();if(e){if("/login"===a.pathname||"/signup"===a.pathname){a.push("/");return}i(e)}else"/login"!==a.pathname&&"/signup"!==a.pathname&&a.push("/login");m(!1)},[a]),d)?(0,r.jsx)("div",{children:"Loading..."}):l||"/login"===a.pathname||"/signup"===a.pathname?(0,r.jsx)(e,{...s,"data-sentry-element":"WrappedComponent","data-sentry-component":"AuthComponent","data-sentry-source-file":"withAuthAccess.tsx"}):null}},29917:(e,s,a)=>{"use strict";a.d(s,{GU:()=>l,Mh:()=>n,Sd:()=>o,X5:()=>t,dr:()=>i});var r=a(14476);let t=r.z.object({email:r.z.string().min(1,"이메일을 입력해 주세요.").email("이메일 형식이 아닙니다."),password:r.z.string().nonempty("비밀번호를 입력해 주세요.").min(6,"비밀번호는 최소 6자 이상이어야 합니다.")}),o=r.z.object({nickName:r.z.string().min(1,{message:"닉네임을 입력해 주세요."}),email:r.z.string().min(1,{message:"이메일을 입력해 주세요."}).email({message:"이메일 형식이 아닙니다."}),phoneNumber:r.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),password:r.z.string().min(6,"비밀번호는 최소 6자 이상이어야 합니다."),confirmPassword:r.z.string().min(1,{message:"비밀번호 확인란을 입력해 주세요."}),role:r.z.enum(["MAKER","DREAMER"],{message:"역할을 선택해 주세요."})}).refine(e=>e.password===e.confirmPassword,{path:["confirmPassword"],message:"비밀번호가 일치하지 않습니다."}),n=r.z.object({nickName:r.z.string().min(1,{message:"닉네임을 입력해 주세요."}),email:r.z.string().min(1,{message:"이메일을 입력해 주세요."}),phoneNumber:r.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),password:r.z.string().optional(),newPassword:r.z.string().optional(),newConfirmPassword:r.z.string().optional(),selectedServices:r.z.array(r.z.string()).optional(),selectedLocations:r.z.array(r.z.string()).optional()}).superRefine((e,s)=>{(e.newPassword||e.newConfirmPassword)&&(e.password||s.addIssue({code:"custom",path:["password"],message:"현재 비밀번호를 입력해 주세요."}),e.newPassword&&e.newPassword.length<6&&s.addIssue({code:"custom",path:["newPassword"],message:"새 비밀번호는 최소 6자 이상이어야 합니다."}),e.newPassword!==e.newConfirmPassword&&s.addIssue({code:"custom",path:["newConfirmPassword"],message:"새 비밀번호가 일치하지 않습니다."}))}),l=r.z.object({nickName:r.z.string().min(1,{message:"닉네임을 입력해 주세요."}),email:r.z.string().min(1,{message:"이메일을 입력해 주세요."}),phoneNumber:r.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),password:r.z.string().optional(),newPassword:r.z.string().optional(),newConfirmPassword:r.z.string().optional()}).refine(e=>!e.newPassword||e.password,{path:["password"],message:"새 비밀번호를 설정하려면 현재 비밀번호를 입력해 주세요."}).refine(e=>!e.newPassword||e.newPassword.length>=6,{path:["newPassword"],message:"새 비밀번호는 최소 6자 이상이어야 합니다."}).refine(e=>!e.newPassword||e.newPassword===e.newConfirmPassword,{path:["newConfirmPassword"],message:"새 비밀번호가 일치하지 않습니다."}),i=r.z.object({nickName:r.z.string().min(1,{message:"닉네임을 입력해 주세요."}),phoneNumber:r.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),role:r.z.enum(["MAKER","DREAMER"],{message:"역할을 선택해 주세요."})})}},e=>{var s=s=>e(e.s=s);e.O(0,[106,636,593,792],()=>s(97436)),_N_E=e.O()}]);