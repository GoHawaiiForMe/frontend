(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[967],{97436:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/maker/edit/informEdit",function(){return a(82778)}])},5279:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r={src:"/_next/static/media/icon_loading.05325840.gif",height:45,width:256,blurWidth:0,blurHeight:0}},86491:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});var r=a(74848);let l=e=>{let{label:s,onClick:a,disabled:l=!1,className:o="",type:t="button"}=e;return(0,r.jsx)("button",{type:t,className:"bold w-full rounded-2xl bg-color-blue-300 py-4 text-xl hover:scale-[1.01] mobile-tablet:text-lg ".concat(l?"cursor-not-allowed bg-color-gray-100":"bg-color-blue-300"," ").concat(o),onClick:a,disabled:l,children:s})}},56534:(e,s,a)=>{"use strict";a.d(s,{A:()=>u});var r=a(77528),l=a(4418),o=a(74848),t=a(96540),n=a(29965),i=a.n(n);let d={src:"/_next/static/media/icon_visibility_off.42d25702.svg",height:24,width:24,blurWidth:0,blurHeight:0},c={src:"/_next/static/media/icon_visibility_on.695d99be.svg",height:24,width:24,blurWidth:0,blurHeight:0},m=(0,t.forwardRef)((e,s)=>{var{label:a,type:n,name:m,value:u,onChange:b,placeholder:p="",className:g="",error:h=!1}=e,w=(0,l._)(e,["label","type","name","value","onChange","placeholder","className","error"]);let[x,N]=t.useState(!1),f="textarea"===n?(0,o.jsx)("textarea",(0,r._)({ref:s,name:m,value:u,onChange:b,placeholder:p,className:"mb-4 h-40 w-full resize-none rounded-xl border bg-color-gray-50 p-4 ".concat(g)},w)):"password"===n?(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("input",(0,r._)({ref:s,type:x?"text":"password",name:m,value:u,onChange:b,placeholder:p,className:"h-16 w-full rounded-xl border p-4 pc:text-xl mobile-tablet:text-lg ".concat(h?"border-color-red-200":"border-color-blue-300"," ").concat(g)},w)),(0,o.jsx)(i(),{src:x?c:d,onClick:()=>{N(e=>!e)},width:24,height:24,alt:x?"비밀번호 보기":"비밀번호 감추기",className:"absolute right-5 top-1/2 -translate-y-1/2 transform cursor-pointer"})]}):(0,o.jsx)("input",(0,r._)({ref:s,className:"h-16 w-full rounded-xl border p-4 pc:text-xl mobile-tablet:text-lg ".concat(h?"border-color-red-200":"border-color-blue-300"," ").concat(g),type:n,name:m,value:u,onChange:b,placeholder:p},w));return(0,o.jsxs)("div",{children:[a&&(0,o.jsx)("label",{className:"semibold mb-4 block pc:text-xl mobile-tablet:text-lg",htmlFor:m,children:a}),f]})});m.displayName="Input";let u=m},82778:(e,s,a)=>{"use strict";a.r(s),a.d(s,{ProfileEditDreamerPage:()=>v,default:()=>j});var r=a(74848),l=a(77528),o=a(55456),t=a(49785),n=a(28871),i=a(56534),d=a(20812),c=a(86491),m=a(96540),u=a(79241),b=a(86715),p=a(23504),g=a(97286),h=a(82309),w=a(62294);let x=async()=>await u.A.getUserInfo(),N=async e=>u.A.patchBasicInfo(e);function f(){let{register:e,handleSubmit:s,watch:a,setValue:u,setError:f,formState:{errors:v}}=(0,t.mN)({resolver:(0,n.u)(d.GU),mode:"onBlur"}),j=(0,b.useRouter)(),{setLogin:k}=(0,p.A)(),[y,P]=(0,m.useState)(!1),[_,z]=(0,m.useState)(null),{data:A,isLoading:C,isError:E,refetch:R}=(0,g.I)({queryKey:["userInfo"],queryFn:x}),S=(0,h.n)({mutationFn:N,onSuccess:()=>{alert("프로필이 성공적으로 수정되었습니다!"),R()},onError:e=>{alert(e.message)}}),I=!!(null==A?void 0:A.email),M=async e=>{if(C||E){alert("사용자 정보를 불러오는 중입니다.");return}let s={nickName:(null==A?void 0:A.nickName)!==e.nickName?e.nickName:null==A?void 0:A.nickName,phoneNumber:(null==A?void 0:A.phoneNumber)!==e.phoneNumber?e.phoneNumber:null==A?void 0:A.phoneNumber,password:e.password?e.password:void 0,newPassword:e.newPassword||void 0};S.mutate(s),(null==A?void 0:A.nickName)!==e.nickName&&k(e.nickName,(null==A?void 0:A.role)||"guest",(null==A?void 0:A.coconut)||0,null==A?void 0:A.email,null==A?void 0:A.phoneNumber)},D=async()=>{let e=F.nickName;try{await w.A.checkNickName({nickName:e})?(P(!0),z("사용 가능한 닉네임입니다!")):(P(!1),(null==A?void 0:A.nickName)===e?f("nickName",{message:"현재 닉네임과 동일합니다."}):f("nickName",{message:"닉네임이 중복되었습니다!"}),z(""))}catch(e){f("nickName",{message:"닉네임 체크 중 오류가 발생했습니다."}),P(!1),alert(e.message)}},F=a(),K=(()=>{var e;let{nickName:s,phoneNumber:a,password:r,newPassword:l,newConfirmPassword:o}=F,t=(null==r?void 0:r.trim())!==""||!l,n=(null==l?void 0:l.trim())!==""&&l===o,i=(null==A?void 0:A.nickName)!==s||(null==A?void 0:A.phoneNumber)!==a,d=!!(null===(e=F.password)||void 0===e?void 0:e.trim());return t&&(i||d||n)})(),$=e=>{let{message:s}=e;return(0,r.jsx)("p",{className:"mt-2 text-color-red-200",children:s})};return(0,m.useEffect)(()=>{A&&(u("nickName",A.nickName),u("email",A.email),u("phoneNumber",A.phoneNumber))},[A,u]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h1",{className:"semibold mt-16 text-3xl",children:"기본정보 수정"}),(0,r.jsx)("div",{className:"my-8 h-0.5 bg-color-line-100"}),(0,r.jsxs)("form",{onSubmit:s(M),className:"w-full",children:[(0,r.jsxs)("div",{className:"grid w-full pc:grid-cols-2 pc:gap-16 mobile-tablet:flex mobile-tablet:flex-col mobile-tablet:gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(i.A,(0,o._)((0,l._)({type:"text",label:"닉네임",placeholder:"기존 닉네임"},e("nickName")),{error:!!v.nickName,className:"border-0 bg-color-background-200"})),(0,r.jsx)("button",{type:"button",onClick:D,className:"bold absolute right-2 top-[60px] rounded-lg bg-color-blue-300 px-2 py-2 text-lg text-color-gray-50 mobile-tablet:top-[53px]",children:"닉네임 확인"}),v.nickName&&(0,r.jsx)($,{message:v.nickName.message}),_&&(0,r.jsx)("p",{className:"text-color-blue-300",children:_})]}),(0,r.jsx)("div",{className:"my-4 h-0.5 bg-color-line-100"}),(0,r.jsx)("div",{children:(0,r.jsx)(i.A,{type:"text",label:"이메일",value:null==A?void 0:A.email,disabled:!0,placeholder:"[이메일과 비밀번호는 비활성화] 간편로그인 회원입니다. ",className:"border-0 bg-color-background-200 text-color-gray-300"})}),(0,r.jsx)("div",{className:"my-4 h-0.5 bg-color-line-100"}),(0,r.jsxs)("div",{className:"mb-16 mobile-tablet:m-0",children:[(0,r.jsx)(i.A,(0,o._)((0,l._)({type:"text",label:"전화번호",placeholder:"숫자만 입력해주세요"},e("phoneNumber")),{error:!!v.phoneNumber,className:"border-0 bg-color-background-200"})),v.phoneNumber&&(0,r.jsx)($,{message:v.phoneNumber.message})]}),(0,r.jsx)("div",{className:"h-0.5 bg-color-line-100 pc:hidden"})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)("div",{children:(0,r.jsx)(i.A,(0,l._)({type:"password",label:"현재 비밀번호",placeholder:"현재 비밀번호를 입력해 주세요",className:"overflow-hidden text-ellipsis whitespace-nowrap border-0 bg-color-background-200 pr-10",disabled:!I},e("password")))}),(0,r.jsx)("div",{className:"my-4 h-0.5 bg-color-line-100"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.A,(0,o._)((0,l._)({type:"password",label:"새 비밀번호",placeholder:"비밀번호를 입력해 주세요",className:"overflow-hidden text-ellipsis whitespace-nowrap border-0 bg-color-background-200 pr-10",disabled:!I},e("newPassword")),{error:!!v.password})),v.password&&(0,r.jsx)($,{message:v.password.message})]}),(0,r.jsx)("div",{className:"my-4 h-0.5 bg-color-line-100"}),(0,r.jsxs)("div",{className:"mb-16",children:[(0,r.jsx)(i.A,(0,o._)((0,l._)({type:"password",label:"새 비밀번호 확인",placeholder:"비밀번호를 다시 한번 입력해 주세요",className:"overflow-hidden text-ellipsis whitespace-nowrap border-0 bg-color-background-200 pr-10",disabled:!I},e("newConfirmPassword")),{error:!!v.newConfirmPassword})),v.newConfirmPassword&&(0,r.jsx)($,{message:v.newConfirmPassword.message})]})]})]}),(0,r.jsxs)("div",{className:"grid gap-8 pb-16 pc:grid-cols-2 mobile-tablet:flex mobile-tablet:flex-col mobile-tablet:gap-4",children:[(0,r.jsx)(c.A,{type:"button",label:"취소",onClick:()=>{j.back()},className:"bold border border-color-blue-300 bg-color-gray-50 text-color-blue-300 mobile-tablet:order-2"}),(0,r.jsx)(c.A,{type:"submit",label:"수정하기",disabled:!K,className:"text-white mobile-tablet:order-1"})]})]})]})}function v(){return(0,r.jsx)(f,{})}let j=(0,a(4107).A)(v,"MAKER")},4107:(e,s,a)=>{"use strict";a.d(s,{A:()=>u});var r=a(77528),l=a(74848),o=a(96540),t=a(86715),n=a(12828),i=a(5279),d=a(29965),c=a.n(d),m=a(23504);let u=(e,s)=>a=>{let d=(0,t.useRouter)(),[u,b]=(0,o.useState)(null),[p,g]=(0,o.useState)(!0),{role:h}=(0,m.A)();return((0,o.useEffect)(()=>{let e=(0,n.iD)();if(e){if("/login"===d.pathname||"/signup"===d.pathname){d.push("/");return}if(s){let e=Array.isArray(s)?s:[s];if("guest"!==h&&!e.includes(h)){d.push("/");return}}b(e)}else"/login"!==d.pathname&&"/signup"!==d.pathname&&d.push("/login");g(!1)},[d,h,s]),p)?(0,l.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,l.jsx)(c(),{src:i.A,alt:"로딩 중"})}):u||"/login"===d.pathname||"/signup"===d.pathname?(0,l.jsx)(e,(0,r._)({},a)):null}},20812:(e,s,a)=>{"use strict";a.d(s,{GU:()=>n,Mh:()=>t,Sd:()=>o,X5:()=>l,dr:()=>i});var r=a(14476);let l=r.z.object({email:r.z.string().min(1,"이메일을 입력해 주세요.").email("이메일 형식이 아닙니다."),password:r.z.string().nonempty("비밀번호를 입력해 주세요.").min(6,"비밀번호는 최소 6자 이상이어야 합니다.")}),o=r.z.object({nickName:r.z.string().min(1,{message:"닉네임을 입력해 주세요."}),email:r.z.string().min(1,{message:"이메일을 입력해 주세요."}).email({message:"이메일 형식이 아닙니다."}),phoneNumber:r.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),password:r.z.string().min(6,"비밀번호는 최소 6자 이상이어야 합니다."),confirmPassword:r.z.string().min(1,{message:"비밀번호 확인란을 입력해 주세요."}),role:r.z.enum(["MAKER","DREAMER"],{message:"역할을 선택해 주세요."})}).refine(e=>e.password===e.confirmPassword,{path:["confirmPassword"],message:"비밀번호가 일치하지 않습니다."}),t=r.z.object({nickName:r.z.string().min(1,{message:"닉네임을 입력해 주세요."}),email:r.z.string().min(1,{message:"이메일을 입력해 주세요."}),phoneNumber:r.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),password:r.z.string().optional(),newPassword:r.z.string().optional(),newConfirmPassword:r.z.string().optional(),selectedServices:r.z.array(r.z.string()).optional(),selectedLocations:r.z.array(r.z.string()).optional()}).superRefine((e,s)=>{(e.newPassword||e.newConfirmPassword)&&(e.password||s.addIssue({code:"custom",path:["password"],message:"현재 비밀번호를 입력해 주세요."}),e.newPassword&&e.newPassword.length<6&&s.addIssue({code:"custom",path:["newPassword"],message:"새 비밀번호는 최소 6자 이상이어야 합니다."}),e.newPassword!==e.newConfirmPassword&&s.addIssue({code:"custom",path:["newConfirmPassword"],message:"새 비밀번호가 일치하지 않습니다."}))}),n=r.z.object({nickName:r.z.string().min(1,{message:"닉네임을 입력해 주세요."}),email:r.z.string().min(1,{message:"이메일을 입력해 주세요."}),phoneNumber:r.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),password:r.z.string().optional(),newPassword:r.z.string().optional(),newConfirmPassword:r.z.string().optional()}).refine(e=>!e.newPassword||e.password,{path:["password"],message:"새 비밀번호를 설정하려면 현재 비밀번호를 입력해 주세요."}).refine(e=>!e.newPassword||e.newPassword.length>=6,{path:["newPassword"],message:"새 비밀번호는 최소 6자 이상이어야 합니다."}).refine(e=>!e.newPassword||e.newPassword===e.newConfirmPassword,{path:["newConfirmPassword"],message:"새 비밀번호가 일치하지 않습니다."}),i=r.z.object({nickName:r.z.string().min(1,{message:"닉네임을 입력해 주세요."}),phoneNumber:r.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),role:r.z.enum(["MAKER","DREAMER"],{message:"역할을 선택해 주세요."})})}},e=>{var s=s=>e(e.s=s);e.O(0,[106,636,593,792],()=>s(97436)),_N_E=e.O()}]);