try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="c4246eb6-fe81-486e-a1d2-470b8cfb487b",e._sentryDebugIdIdentifier="sentry-dbid-c4246eb6-fe81-486e-a1d2-470b8cfb487b")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[493],{20648:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/dreamer/edit/[id]",function(){return a(68997)}])},77687:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t={src:"/_next/static/media/icon_default_profile.c8ad1354.svg",height:160,width:160,blurWidth:0,blurHeight:0}},64858:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});var t=a(74848);let r=e=>{let{label:s,onClick:a,disabled:r=!1,className:l="",type:o="button"}=e;return(0,t.jsx)("button",{type:o,className:"w-full py-4 bg-color-blue-300 bold rounded-2xl  text-xl mobile-tablet:text-lg ".concat(r?"bg-color-gray-100 cursor-not-allowed":"bg-color-blue-300"," ").concat(l),onClick:a,disabled:r,"data-sentry-component":"Button","data-sentry-source-file":"Button.tsx",children:s})}},99324:(e,s,a)=>{"use strict";a.d(s,{A:()=>i});var t=a(74848),r=a(30653),l=a(29965),o=a.n(l),n=a(94791);function i(e){let{onSelectImage:s,onClose:a}=e;return(0,t.jsx)(r.A,{label:"프로필 이미지 선택하기",closeModal:a,"data-sentry-element":"ModalLayout","data-sentry-component":"ImageModal","data-sentry-source-file":"ImageModal.tsx",children:(0,t.jsx)("div",{className:"mb-10 flex gap-4",children:n.A.map((e,a)=>(0,t.jsx)("div",{onClick:()=>s(e.key),className:"cursor-pointer",children:(0,t.jsx)(o(),{src:e.src,alt:"아바타".concat(a+1),width:100,height:100})},a))})})}},72460:(e,s,a)=>{"use strict";a.d(s,{A:()=>c});var t=a(74848),r=a(96540),l=a(29965),o=a.n(l);let n={src:"/_next/static/media/icon_visibility_off.7dedf543.svg",height:24,width:24,blurWidth:0,blurHeight:0},i={src:"/_next/static/media/icon_visibility_on.6f9063a3.svg",height:24,width:24,blurWidth:0,blurHeight:0},d=(0,r.forwardRef)((e,s)=>{let{label:a,type:l,name:d,value:c,onChange:m,placeholder:p="",className:u="",error:b=!1,...g}=e,[x,h]=r.useState(!1),f="textarea"===l?(0,t.jsx)("textarea",{ref:s,name:d,value:c,onChange:m,placeholder:p,className:"mb-4 h-40 w-full resize-none rounded-xl border bg-color-gray-50 p-4 ".concat(u),...g}):"password"===l?(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{ref:s,type:x?"text":"password",name:d,value:c,onChange:m,placeholder:p,className:"h-16 w-full rounded-xl border p-4 pc:text-xl mobile-tablet:text-lg ".concat(b?"border-color-red-200":"border-color-blue-300"," ").concat(u),...g}),(0,t.jsx)(o(),{src:x?i:n,onClick:()=>{h(e=>!e)},width:24,height:24,alt:x?"비밀번호 보기":"비밀번호 감추기",className:"absolute right-5 top-1/2 -translate-y-1/2 transform cursor-pointer"})]}):(0,t.jsx)("input",{ref:s,className:"h-16 w-full rounded-xl border p-4 pc:text-xl mobile-tablet:text-lg ".concat(b?"border-color-red-200":"border-color-blue-300"," ").concat(u),type:l,name:d,value:c,onChange:m,placeholder:p,...g});return(0,t.jsxs)("div",{children:[a&&(0,t.jsx)("label",{className:"semibold mb-4 block pc:text-xl mobile-tablet:text-lg",htmlFor:d,children:a}),f]})});d.displayName="Input";let c=d},30653:(e,s,a)=>{"use strict";a.d(s,{A:()=>n});var t=a(74848),r=a(69586),l=a(29965),o=a.n(l);function n(e){let{label:s,children:a,closeModal:l}=e;return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center ","data-sentry-component":"ModalLayout","data-sentry-source-file":"ModalLayout.tsx",children:(0,t.jsxs)("div",{className:" bg-white rounded-2xl p-8 w-[608px] text-2xl semibold",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-10",children:[s,(0,t.jsx)(o(),{src:r.A,alt:"닫기",width:36,height:36,onClick:l,className:"cursor-pointer","data-sentry-element":"Image","data-sentry-source-file":"ModalLayout.tsx"})]}),a]})})}},71061:(e,s,a)=>{"use strict";a.d(s,{A:()=>n});var t=a(74848),r=a(17628);let l=e=>{let{selectedTypes:s,toggleSelection:a,data:l,className:o,itemClassName:n}=e;return(0,t.jsx)("div",{className:"".concat(null!=o?o:"grid grid-cols-3 gap-3"," "),"data-sentry-component":"Services","data-sentry-source-file":"Selector.tsx",children:(l||r.A.services).map((e,r)=>(0,t.jsx)("div",{className:"".concat(null!=n?n:""," medium flex cursor-pointer justify-center rounded-3xl border px-3 py-2 text-2lg mobile-tablet:px-2 mobile-tablet:py-1 mobile-tablet:text-md ").concat(s.includes(e.name)?"bold border-color-blue-300 bg-color-blue-50 text-color-blue-300":"border-color-gray-100 bg-color-background-100"),onClick:()=>null==a?void 0:a(e.mapping),children:(0,t.jsx)("button",{type:"button",children:e.name})},r))})},o=e=>{let{selectedTypes:s,toggleSelection:a,data:l,className:o,itemClassName:n}=e;return(0,t.jsx)("div",{className:"".concat(null!=o?o:"grid grid-cols-5 gap-3"," w-[416px] mobile-tablet:w-[280px] mobile-tablet:gap-2"),"data-sentry-component":"Locations","data-sentry-source-file":"Selector.tsx",children:(l||r.A.locations).map((e,r)=>(0,t.jsx)("div",{className:"".concat(null!=n?n:""," medium flex cursor-pointer justify-center rounded-3xl border px-3 py-2 text-2lg mobile-tablet:px-2 mobile-tablet:py-1 mobile-tablet:text-md ").concat(s.includes(e.name)?"bold border-color-blue-300 bg-color-blue-50 text-color-blue-300":"border-color-gray-100 bg-color-background-100"),onClick:()=>null==a?void 0:a(e.mapping),children:(0,t.jsx)("button",{type:"button",children:e.name})},r))})};function n(e){let{category:s,selectedTypes:a,toggleSelection:r,data:n,className:i,itemClassName:d}=e;return(0,t.jsxs)(t.Fragment,{children:["services"===s&&(0,t.jsx)(l,{selectedTypes:a,toggleSelection:r,data:n,className:i,itemClassName:d}),"locations"===s&&(0,t.jsx)(o,{selectedTypes:a,toggleSelection:r,data:n,className:i,itemClassName:d})]})}},68997:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>v});var t=a(74848),r=a(49785),l=a(86715),o=a(96540),n=a(29965),i=a.n(n),d=a(28871),c=a(72460),m=a(64858),p=a(99324),u=a(29917),b=a(71061),g=a(77687),x=a(17628),h=a(69340),f=a(41917),w=a(94791),N=a(2385);function y(){var e;let[s,a]=(0,o.useState)([]),[n,y]=(0,o.useState)([]),[v,j]=(0,o.useState)(!1),[P,A]=(0,o.useState)(null),[k,E]=(0,o.useState)(null),[z,C]=(0,o.useState)(null),{register:I,handleSubmit:S,watch:_,setValue:D,formState:{errors:G}}=(0,r.mN)({resolver:(0,d.u)(u.Mh),mode:"onBlur"}),M=(0,l.useRouter)(),{setLogin:O}=(0,f.A)(),T=!!(null==k?void 0:k.email),U=async e=>{let a={nickName:(null==k?void 0:k.nickName)!==e.nickName?e.nickName:null==k?void 0:k.nickName,phoneNumber:(null==k?void 0:k.phoneNumber)!==e.phoneNumber?e.phoneNumber:null==k?void 0:k.phoneNumber,password:e.password?e.password:void 0,newPassword:e.newPassword||void 0},t={image:P||void 0,tripTypes:s.length>0?s:void 0,serviceArea:n.length>0?n:void 0};try{let s=a.nickName||a.phoneNumber||a.password?h.A.patchBasicInfo(a):Promise.resolve(),r=t.image||t.tripTypes||t.serviceArea?h.A.patchProfileDreamer(t):Promise.resolve();await Promise.all([s,r]),alert("프로필이 성공적으로 수정되었습니다!"),(null==k?void 0:k.nickName)!==e.nickName&&O(e.nickName,(null==k?void 0:k.role)||"guest",(null==k?void 0:k.coconut)||0,z.image),M.reload()}catch(e){console.error("프로필 수정 실패",e),alert("수정 중 문제가 발생했습니다. 다시 시도해주세요."),M.reload()}},L=_(),R=(()=>{var e,a;let{nickName:t,phoneNumber:r,password:l,newPassword:o,newConfirmPassword:i}=L,d=(null==l?void 0:l.trim())!==""||!o,c=(null==o?void 0:o.trim())!==""&&o===i,m=(null==k?void 0:k.nickName)!==t||(null==k?void 0:k.phoneNumber)!==r,p=P!==(null==z?void 0:z.profileImg)||s.join(",")!==(null==z?void 0:null===(e=z.selectedServices)||void 0===e?void 0:e.join(","))||n.join(",")!==(null==z?void 0:null===(a=z.selectedLocations)||void 0===a?void 0:a.join(","));return d&&(m||c||p)})(),B=e=>{let{message:s}=e;return(0,t.jsx)("p",{className:"mt-2 text-color-red-200","data-sentry-component":"ErrorMessage","data-sentry-source-file":"ProfileEditDreamer.tsx",children:s})};return(0,o.useEffect)(()=>{(0,N.iD)()&&(async()=>{try{let e=await h.A.getUserInfo(),s=await h.A.getProfileInfo();E(e),C(s),s.image&&A(s.image),D("nickName",e.nickName),D("email",e.email),D("phoneNumber",e.phoneNumber),a(s.tripTypes||[]),y(s.serviceArea||[])}catch(e){console.error(e)}})()},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h1",{className:"semibold mt-16 text-3xl",children:"프로필 수정"}),(0,t.jsx)("div",{className:"my-8 h-0.5 bg-color-line-100"}),(0,t.jsxs)("form",{onSubmit:S(U),className:"w-full",children:[(0,t.jsxs)("div",{className:"grid w-full gap-16 pc:grid-cols-2 mobile-tablet:flex mobile-tablet:flex-col",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.A,{type:"text",label:"닉네임",placeholder:"닉네임을 입력해주세요",...I("nickName"),error:!!G.nickName,className:"border-0 bg-color-background-200","data-sentry-element":"Input","data-sentry-source-file":"ProfileEditDreamer.tsx"}),G.nickName&&(0,t.jsx)(B,{message:G.nickName.message})]}),(0,t.jsx)("div",{className:"my-4 h-0.5 bg-color-line-100"}),(0,t.jsx)("div",{children:(0,t.jsx)(c.A,{type:"text",label:"이메일",value:null==k?void 0:k.email,disabled:!0,placeholder:"[이메일과 비밀번호는 비활성화] 간편로그인 회원입니다.",className:"border-0 bg-color-background-200 text-color-gray-300","data-sentry-element":"Input","data-sentry-source-file":"ProfileEditDreamer.tsx"})}),(0,t.jsx)("div",{className:"my-4 h-0.5 bg-color-line-100"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.A,{type:"text",label:"전화번호",defaultValue:(null==k?void 0:k.phoneNumber)||"",placeholder:"숫자만 입력해주세요",...I("phoneNumber"),error:!!G.phoneNumber,className:"border-0 bg-color-background-200","data-sentry-element":"Input","data-sentry-source-file":"ProfileEditDreamer.tsx"}),G.phoneNumber&&(0,t.jsx)(B,{message:G.phoneNumber.message})]}),(0,t.jsx)("div",{className:"my-4 h-0.5 bg-color-line-100"}),(0,t.jsx)("div",{children:(0,t.jsx)(c.A,{type:"password",label:"현재 비밀번호",placeholder:"현재 비밀번호를 입력해 주세요",className:"border-0 bg-color-background-200",disabled:!T,...I("password"),"data-sentry-element":"Input","data-sentry-source-file":"ProfileEditDreamer.tsx"})}),(0,t.jsx)("div",{className:"my-4 h-0.5 bg-color-line-100"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.A,{type:"password",label:"새 비밀번호",placeholder:"비밀번호를 입력해 주세요",className:"border-0 bg-color-background-200",disabled:!T,...I("newPassword"),error:!!G.newPassword,"data-sentry-element":"Input","data-sentry-source-file":"ProfileEditDreamer.tsx"}),G.newPassword&&(0,t.jsx)(B,{message:G.newPassword.message})]}),(0,t.jsx)("div",{className:"my-4 h-0.5 bg-color-line-100"}),(0,t.jsx)("div",{children:(0,t.jsx)(c.A,{type:"password",label:"새 비밀번호 확인",placeholder:"비밀번호를 다시 한번 입력해 주세요",className:"border-0 bg-color-background-200",disabled:!T,...I("newConfirmPassword"),error:!!G.newConfirmPassword,"data-sentry-element":"Input","data-sentry-source-file":"ProfileEditDreamer.tsx"})}),(0,t.jsx)("div",{className:"mb-8",children:G.newConfirmPassword&&(0,t.jsx)(B,{message:G.newConfirmPassword.message})})]}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"semibold mb-3 text-xl mobile-tablet:text-lg",children:"프로필 이미지"}),(0,t.jsx)("div",{onClick:()=>j(!0),className:"w-[160px] cursor-pointer",children:P?(0,t.jsx)(i(),{src:(null===(e=w.A.find(e=>e.key===P))||void 0===e?void 0:e.src)||g.A,alt:"프로필 이미지",width:160,height:160}):(0,t.jsx)(i(),{src:g.A,alt:"프로필 이미지",width:150,height:150})})]}),v&&(0,t.jsx)(p.A,{onSelectImage:e=>{A(e),j(!1)},onClose:()=>j(!1)}),(0,t.jsx)("div",{className:"my-2 h-0.5 bg-color-line-100"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"semibold mb-3 text-xl mobile-tablet:text-lg",children:"이용 서비스"}),(0,t.jsx)("p",{className:"mb-8 text-lg text-color-gray-400 mobile-tablet:text-xs",children:"* 플랜 요청 시 이용 서비스를 선택할 수 있어요."}),(0,t.jsx)(b.A,{category:"services",selectedTypes:s.map(e=>{var s;return(null===(s=x.A.services.find(s=>s.mapping===e))||void 0===s?void 0:s.name)||e}),toggleSelection:e=>{a(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},"data-sentry-element":"Selector","data-sentry-source-file":"ProfileEditDreamer.tsx"})]}),(0,t.jsx)("div",{className:"my-2 h-0.5 bg-color-line-100"}),(0,t.jsxs)("div",{className:"mb-12",children:[(0,t.jsx)("p",{className:"semibold mb-3 text-xl mobile-tablet:text-lg",children:"여행 하고 싶은 지역"}),(0,t.jsx)("p",{className:"mb-8 text-lg text-color-gray-400 mobile-tablet:text-xs",children:"* 플랜 요청 시 지역을 설정할 수 있어요."}),(0,t.jsx)(b.A,{category:"locations",selectedTypes:n.map(e=>{var s;return(null===(s=x.A.locations.find(s=>s.mapping===e))||void 0===s?void 0:s.name)||e}),toggleSelection:e=>{y(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},"data-sentry-element":"Selector","data-sentry-source-file":"ProfileEditDreamer.tsx"})]})]})})]}),(0,t.jsxs)("div",{className:"grid gap-8 pb-16 pc:grid-cols-2 mobile-tablet:flex mobile-tablet:flex-col mobile-tablet:gap-4",children:[(0,t.jsx)(m.A,{type:"button",label:"취소",onClick:()=>{M.push("/signup")},className:"bold border border-color-gray-200 bg-color-gray-50 text-color-black-300 mobile-tablet:order-2","data-sentry-element":"Button","data-sentry-source-file":"ProfileEditDreamer.tsx"}),(0,t.jsx)(m.A,{type:"submit",label:"수정하기",disabled:!R,className:"text-color-gray-50 mobile-tablet:order-1","data-sentry-element":"Button","data-sentry-source-file":"ProfileEditDreamer.tsx"})]})]})]})}function v(){return(0,t.jsx)(y,{"data-sentry-element":"ProfileEditDreamer","data-sentry-component":"ProfileEditDreamerPage","data-sentry-source-file":"[id].tsx"})}},17628:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t={services:[{name:"맛집 탐방형",mapping:"FOOD_TOUR"},{name:"기념품/쇼핑형",mapping:"SHOPPING"},{name:"휴양형",mapping:"RELAXATION"},{name:"문화/역사탐방형",mapping:"CULTURE"},{name:"액티비티/탐험형",mapping:"ACTIVITY"},{name:"축제참여형",mapping:"FESTIVAL"}],locations:[{name:"서울",mapping:"SEOUL"},{name:"부산",mapping:"BUSAN"},{name:"인천",mapping:"INCHEON"},{name:"대구",mapping:"DAEGU"},{name:"대전",mapping:"DAEJEON"},{name:"광주",mapping:"GWANGJU"},{name:"울산",mapping:"ULSAN"},{name:"세종",mapping:"SEJONG"},{name:"경기",mapping:"GYEONGGI"},{name:"강원",mapping:"GANGWON"},{name:"충북",mapping:"CHUNGBUK"},{name:"충남",mapping:"CHUNGNAM"},{name:"전북",mapping:"JEONBUK"},{name:"전남",mapping:"JEONNAM"},{name:"경북",mapping:"GYEONGBUK"},{name:"경남",mapping:"GYEONGNAM"},{name:"제주",mapping:"JEJU"}]}},29917:(e,s,a)=>{"use strict";a.d(s,{GU:()=>n,Mh:()=>o,Sd:()=>l,X5:()=>r,dr:()=>i});var t=a(14476);let r=t.z.object({email:t.z.string().min(1,"이메일을 입력해 주세요.").email("이메일 형식이 아닙니다."),password:t.z.string().nonempty("비밀번호를 입력해 주세요.").min(6,"비밀번호는 최소 6자 이상이어야 합니다.")}),l=t.z.object({nickName:t.z.string().min(1,{message:"닉네임을 입력해 주세요."}),email:t.z.string().min(1,{message:"이메일을 입력해 주세요."}).email({message:"이메일 형식이 아닙니다."}),phoneNumber:t.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),password:t.z.string().min(6,"비밀번호는 최소 6자 이상이어야 합니다."),confirmPassword:t.z.string().min(1,{message:"비밀번호 확인란을 입력해 주세요."}),role:t.z.enum(["MAKER","DREAMER"],{message:"역할을 선택해 주세요."})}).refine(e=>e.password===e.confirmPassword,{path:["confirmPassword"],message:"비밀번호가 일치하지 않습니다."}),o=t.z.object({nickName:t.z.string().min(1,{message:"닉네임을 입력해 주세요."}),email:t.z.string().min(1,{message:"이메일을 입력해 주세요."}),phoneNumber:t.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),password:t.z.string().optional(),newPassword:t.z.string().optional(),newConfirmPassword:t.z.string().optional(),selectedServices:t.z.array(t.z.string()).optional(),selectedLocations:t.z.array(t.z.string()).optional()}).superRefine((e,s)=>{(e.newPassword||e.newConfirmPassword)&&(e.password||s.addIssue({code:"custom",path:["password"],message:"현재 비밀번호를 입력해 주세요."}),e.newPassword&&e.newPassword.length<6&&s.addIssue({code:"custom",path:["newPassword"],message:"새 비밀번호는 최소 6자 이상이어야 합니다."}),e.newPassword!==e.newConfirmPassword&&s.addIssue({code:"custom",path:["newConfirmPassword"],message:"새 비밀번호가 일치하지 않습니다."}))}),n=t.z.object({nickName:t.z.string().min(1,{message:"닉네임을 입력해 주세요."}),email:t.z.string().min(1,{message:"이메일을 입력해 주세요."}),phoneNumber:t.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),password:t.z.string().optional(),newPassword:t.z.string().optional(),newConfirmPassword:t.z.string().optional()}).refine(e=>!e.newPassword||e.password,{path:["password"],message:"새 비밀번호를 설정하려면 현재 비밀번호를 입력해 주세요."}).refine(e=>!e.newPassword||e.newPassword.length>=6,{path:["newPassword"],message:"새 비밀번호는 최소 6자 이상이어야 합니다."}).refine(e=>!e.newPassword||e.newPassword===e.newConfirmPassword,{path:["newConfirmPassword"],message:"새 비밀번호가 일치하지 않습니다."}),i=t.z.object({nickName:t.z.string().min(1,{message:"닉네임을 입력해 주세요."}),phoneNumber:t.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),role:t.z.enum(["MAKER","DREAMER"],{message:"역할을 선택해 주세요."})})}},e=>{var s=s=>e(e.s=s);e.O(0,[106,636,593,792],()=>s(20648)),_N_E=e.O()}]);