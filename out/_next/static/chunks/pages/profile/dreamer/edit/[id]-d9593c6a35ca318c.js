(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[493],{20648:(e,s,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/dreamer/edit/[id]",function(){return l(79979)}])},30478:(e,s,l)=>{"use strict";l.d(s,{A:()=>a});let a={src:"/_next/static/media/icon_default_profile.ae812f1c.svg",height:160,width:160,blurWidth:0,blurHeight:0}},5279:(e,s,l)=>{"use strict";l.d(s,{A:()=>a});let a={src:"/_next/static/media/icon_loading.05325840.gif",height:45,width:256,blurWidth:0,blurHeight:0}},86491:(e,s,l)=>{"use strict";l.d(s,{A:()=>r});var a=l(74848);let r=e=>{let{label:s,onClick:l,disabled:r=!1,className:t="",type:o="button"}=e;return(0,a.jsx)("button",{type:o,className:"bold w-full rounded-2xl bg-color-blue-300 py-4 text-xl hover:scale-[1.01] mobile-tablet:text-lg ".concat(r?"cursor-not-allowed bg-color-gray-100":"bg-color-blue-300"," ").concat(t),onClick:l,disabled:r,children:s})}},63577:(e,s,l)=>{"use strict";l.d(s,{A:()=>n});var a=l(74848),r=l(92314),t=l(29965),o=l.n(t),i=l(28775);function n(e){let{onSelectImage:s,onClose:l}=e;return(0,a.jsx)(r.A,{label:"프로필 이미지 선택하기",closeModal:l,children:(0,a.jsx)("div",{className:"mb-10 flex gap-4",children:i.A.map((e,l)=>(0,a.jsx)("div",{onClick:()=>s(e.key),className:"cursor-pointer",children:(0,a.jsx)(o(),{src:e.src,alt:"아바타".concat(l+1),width:100,height:100})},l))})})}},56534:(e,s,l)=>{"use strict";l.d(s,{A:()=>p});var a=l(77528),r=l(4418),t=l(74848),o=l(96540),i=l(29965),n=l.n(i);let c={src:"/_next/static/media/icon_visibility_off.42d25702.svg",height:24,width:24,blurWidth:0,blurHeight:0},d={src:"/_next/static/media/icon_visibility_on.695d99be.svg",height:24,width:24,blurWidth:0,blurHeight:0},m=(0,o.forwardRef)((e,s)=>{var{label:l,type:i,name:m,value:p,onChange:g,placeholder:b="",className:u="",error:x=!1}=e,h=(0,r._)(e,["label","type","name","value","onChange","placeholder","className","error"]);let[N,w]=o.useState(!1),v="textarea"===i?(0,t.jsx)("textarea",(0,a._)({ref:s,name:m,value:p,onChange:g,placeholder:b,className:"mb-4 h-40 w-full resize-none rounded-xl border bg-color-gray-50 p-4 ".concat(u)},h)):"password"===i?(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",(0,a._)({ref:s,type:N?"text":"password",name:m,value:p,onChange:g,placeholder:b,className:"h-16 w-full rounded-xl border p-4 pc:text-xl mobile-tablet:text-lg ".concat(x?"border-color-red-200":"border-color-blue-300"," ").concat(u)},h)),(0,t.jsx)(n(),{src:N?d:c,onClick:()=>{w(e=>!e)},width:24,height:24,alt:N?"비밀번호 보기":"비밀번호 감추기",className:"absolute right-5 top-1/2 -translate-y-1/2 transform cursor-pointer"})]}):(0,t.jsx)("input",(0,a._)({ref:s,className:"h-16 w-full rounded-xl border p-4 pc:text-xl mobile-tablet:text-lg ".concat(x?"border-color-red-200":"border-color-blue-300"," ").concat(u),type:i,name:m,value:p,onChange:g,placeholder:b},h));return(0,t.jsxs)("div",{children:[l&&(0,t.jsx)("label",{className:"semibold mb-4 block pc:text-xl mobile-tablet:text-lg",htmlFor:m,children:l}),v]})});m.displayName="Input";let p=m},92314:(e,s,l)=>{"use strict";l.d(s,{A:()=>i});var a=l(74848),r=l(94027),t=l(29965),o=l.n(t);function i(e){let{label:s,children:l,closeModal:t}=e;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center ",children:(0,a.jsxs)("div",{className:" bg-white rounded-2xl p-8 w-[608px] text-2xl semibold",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-10",children:[s,(0,a.jsx)(o(),{src:r.A,alt:"닫기",width:36,height:36,onClick:t,className:"cursor-pointer"})]}),l]})})}},80800:(e,s,l)=>{"use strict";l.d(s,{A:()=>i});var a=l(74848),r=l(9593);let t=e=>{let{selectedTypes:s,toggleSelection:l,data:t,className:o,itemClassName:i}=e;return(0,a.jsx)("div",{className:"".concat(null!=o?o:"grid grid-cols-3 gap-3"," "),children:(t||r.A.services).map((e,r)=>(0,a.jsx)("div",{className:"".concat(null!=i?i:""," medium flex cursor-pointer justify-center rounded-3xl border px-3 py-2 text-2lg hover:scale-105 mobile-tablet:px-2 mobile-tablet:py-1 mobile-tablet:text-md ").concat(s.includes(e.name)?"bold border-color-blue-300 bg-color-blue-50 text-color-blue-300":"border-color-gray-100 bg-color-background-100"),onClick:()=>null==l?void 0:l(e.mapping),children:(0,a.jsx)("button",{type:"button",children:e.name})},r))})},o=e=>{let{selectedTypes:s,toggleSelection:l,data:t,className:o,itemClassName:i}=e;return(0,a.jsx)("div",{className:"".concat(null!=o?o:"grid grid-cols-5 gap-3"," w-[416px] mobile-tablet:w-[280px] mobile-tablet:gap-2"),children:(t||r.A.locations).map((e,r)=>(0,a.jsx)("div",{className:"".concat(null!=i?i:""," medium flex cursor-pointer justify-center rounded-3xl border px-3 py-2 text-2lg hover:scale-105 mobile-tablet:px-2 mobile-tablet:py-1 mobile-tablet:text-md ").concat(s.includes(e.name)?"bold border-color-blue-300 bg-color-blue-50 text-color-blue-300":"border-color-gray-100 bg-color-background-100"),onClick:()=>null==l?void 0:l(e.mapping),children:(0,a.jsx)("button",{type:"button",children:e.name})},r))})};function i(e){let{category:s,selectedTypes:l,toggleSelection:r,data:i,className:n,itemClassName:c}=e;return(0,a.jsxs)(a.Fragment,{children:["services"===s&&(0,a.jsx)(t,{selectedTypes:l,toggleSelection:r,data:i,className:n,itemClassName:c}),"locations"===s&&(0,a.jsx)(o,{selectedTypes:l,toggleSelection:r,data:i,className:n,itemClassName:c})]})}},79979:(e,s,l)=>{"use strict";l.r(s),l.d(s,{ProfileEditDreamerPage:()=>k,default:()=>P});var a=l(74848),r=l(77528),t=l(55456),o=l(49785),i=l(86715),n=l(96540),c=l(29965),d=l.n(c),m=l(28871),p=l(56534),g=l(86491),b=l(63577),u=l(20812),x=l(80800),h=l(30478),N=l(9593),w=l(79241),v=l(23504),j=l(28775),f=l(12828),y=l(62294);function A(){var e;let[s,l]=(0,n.useState)([]),[c,A]=(0,n.useState)([]),[k,P]=(0,n.useState)(!1),[_,C]=(0,n.useState)(null),[z,E]=(0,n.useState)(null),[S,G]=(0,n.useState)(null),[O,I]=(0,n.useState)(!1),[U,T]=(0,n.useState)(null),{register:R,handleSubmit:M,watch:D,setValue:H,setError:J,formState:{errors:L}}=(0,o.mN)({resolver:(0,m.u)(u.Mh),mode:"onBlur"}),B=(0,i.useRouter)(),{setLogin:W}=(0,v.A)(),F=!!(null==z?void 0:z.email),K=async()=>{let e=Y.nickName;try{await y.A.checkNickName({nickName:e})?(I(!0),T("사용 가능한 닉네임입니다!")):(I(!1),z.nickName===e?J("nickName",{message:"현재 닉네임과 동일합니다."}):J("nickName",{message:"닉네임이 중복되었습니다!"}),T(""))}catch(e){J("nickName",{message:"닉네임 체크 중 오류가 발생했습니다."}),I(!1),alert(e.message)}},X=async e=>{let l={nickName:(null==z?void 0:z.nickName)!==e.nickName?e.nickName:null==z?void 0:z.nickName,phoneNumber:(null==z?void 0:z.phoneNumber)!==e.phoneNumber?e.phoneNumber:null==z?void 0:z.phoneNumber,password:e.password?e.password:void 0,newPassword:e.newPassword||void 0},a={image:_||void 0,tripTypes:s.length>0?s:void 0,serviceArea:c.length>0?c:void 0};try{let s=l.nickName||l.phoneNumber||l.password?w.A.patchBasicInfo(l):Promise.resolve(),r=a.image||a.tripTypes||a.serviceArea?w.A.patchProfileDreamer(a):Promise.resolve();await Promise.all([s,r]),alert("프로필이 성공적으로 수정되었습니다!"),(null==z?void 0:z.nickName)!==e.nickName&&W(e.nickName,(null==z?void 0:z.role)||"guest",(null==z?void 0:z.coconut)||0,S.image),B.reload()}catch(e){alert(e.message),B.reload()}},Y=D(),$=(()=>{var e,l;let{nickName:a,phoneNumber:r,password:t,newPassword:o,newConfirmPassword:i}=Y,n=(null==t?void 0:t.trim())!==""||!o,d=(null==o?void 0:o.trim())!==""&&o===i,m=(null==z?void 0:z.nickName)!==a||(null==z?void 0:z.phoneNumber)!==r,p=_!==(null==S?void 0:S.profileImg)||s.join(",")!==(null==S?void 0:null===(e=S.selectedServices)||void 0===e?void 0:e.join(","))||c.join(",")!==(null==S?void 0:null===(l=S.selectedLocations)||void 0===l?void 0:l.join(","));return n&&(m||d||p)})(),V=e=>{let{message:s}=e;return(0,a.jsx)("p",{className:"mt-2 text-color-red-200",children:s})};return(0,n.useEffect)(()=>{(0,f.iD)()&&(async()=>{try{let e=await w.A.getUserInfo(),s=await w.A.getProfileInfo();E(e),G(s),s.image&&C(s.image),H("nickName",e.nickName),H("email",e.email),H("phoneNumber",e.phoneNumber),l(s.tripTypes||[]),A(s.serviceArea||[])}catch(e){console.error(e)}})()},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{className:"semibold mt-16 text-3xl",children:"프로필 수정"}),(0,a.jsx)("div",{className:"my-8 h-0.5 bg-color-line-100"}),(0,a.jsxs)("form",{onSubmit:M(X),className:"w-full",children:[(0,a.jsxs)("div",{className:"grid w-full gap-16 pc:grid-cols-2 mobile-tablet:flex mobile-tablet:flex-col",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p.A,(0,t._)((0,r._)({type:"text",label:"닉네임",placeholder:"닉네임을 입력해주세요"},R("nickName")),{error:!!L.nickName,className:"border-0 bg-color-background-200"})),(0,a.jsx)("button",{type:"button",onClick:K,className:"bold absolute right-2 top-[60px] rounded-lg bg-color-blue-300 px-2 py-2 text-lg text-color-gray-50 mobile-tablet:top-[53px]",children:"닉네임 확인"}),L.nickName&&(0,a.jsx)(V,{message:L.nickName.message}),U&&(0,a.jsx)("p",{className:"text-color-blue-300",children:U})]}),(0,a.jsx)("div",{className:"my-4 h-0.5 bg-color-line-100"}),(0,a.jsx)("div",{children:(0,a.jsx)(p.A,{type:"text",label:"이메일",value:null==z?void 0:z.email,disabled:!0,placeholder:"[이메일과 비밀번호는 비활성화] 간편로그인 회원입니다.",className:"border-0 bg-color-background-200 text-color-gray-300"})}),(0,a.jsx)("div",{className:"my-4 h-0.5 bg-color-line-100"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(p.A,(0,t._)((0,r._)({type:"text",label:"전화번호",defaultValue:(null==z?void 0:z.phoneNumber)||"",placeholder:"숫자만 입력해주세요"},R("phoneNumber")),{error:!!L.phoneNumber,className:"border-0 bg-color-background-200"})),L.phoneNumber&&(0,a.jsx)(V,{message:L.phoneNumber.message})]}),(0,a.jsx)("div",{className:"my-4 h-0.5 bg-color-line-100"}),(0,a.jsx)("div",{children:(0,a.jsx)(p.A,(0,r._)({type:"password",label:"현재 비밀번호",placeholder:"현재 비밀번호 입력해 주세요",className:"overflow-hidden text-ellipsis whitespace-nowrap border-0 bg-color-background-200 pr-10",disabled:!F},R("password")))}),(0,a.jsx)("div",{className:"my-4 h-0.5 bg-color-line-100"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(p.A,(0,t._)((0,r._)({type:"password",label:"새 비밀번호",placeholder:"비밀번호를 입력해 주세요",className:"overflow-hidden text-ellipsis whitespace-nowrap border-0 bg-color-background-200 pr-10",disabled:!F},R("newPassword")),{error:!!L.newPassword})),L.newPassword&&(0,a.jsx)(V,{message:L.newPassword.message})]}),(0,a.jsx)("div",{className:"my-4 h-0.5 bg-color-line-100"}),(0,a.jsx)("div",{children:(0,a.jsx)(p.A,(0,t._)((0,r._)({type:"password",label:"새 비밀번호 확인",placeholder:"비밀번호를 다시 한번 입력해 주세요",className:"overflow-hidden text-ellipsis whitespace-nowrap border-0 bg-color-background-200 pr-10",disabled:!F},R("newConfirmPassword")),{error:!!L.newConfirmPassword}))}),(0,a.jsx)("div",{className:"mb-8",children:L.newConfirmPassword&&(0,a.jsx)(V,{message:L.newConfirmPassword.message})})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"semibold mb-3 text-xl mobile-tablet:text-lg",children:"프로필 이미지"}),(0,a.jsx)("div",{onClick:()=>P(!0),className:"w-[160px] cursor-pointer",children:_?(0,a.jsx)(d(),{src:(null===(e=j.A.find(e=>e.key===_))||void 0===e?void 0:e.src)||h.A,alt:"프로필 이미지",width:130,height:130}):(0,a.jsx)(d(),{src:h.A,alt:"프로필 이미지",width:150,height:150})})]}),k&&(0,a.jsx)(b.A,{onSelectImage:e=>{C(e),P(!1)},onClose:()=>P(!1)}),(0,a.jsx)("div",{className:"my-2 h-0.5 bg-color-line-100"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"semibold mb-3 text-xl mobile-tablet:text-lg",children:"이용 서비스"}),(0,a.jsx)("p",{className:"mb-8 text-lg text-color-gray-400 mobile-tablet:text-xs",children:"* 플랜 요청 시 이용 서비스를 선택할 수 있어요."}),(0,a.jsx)(x.A,{category:"services",selectedTypes:s.map(e=>{var s;return(null===(s=N.A.services.find(s=>s.mapping===e))||void 0===s?void 0:s.name)||e}),toggleSelection:e=>{l(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])}})]}),(0,a.jsx)("div",{className:"my-2 h-0.5 bg-color-line-100"}),(0,a.jsxs)("div",{className:"mb-12",children:[(0,a.jsx)("p",{className:"semibold mb-3 text-xl mobile-tablet:text-lg",children:"여행 하고 싶은 지역"}),(0,a.jsx)("p",{className:"mb-8 text-lg text-color-gray-400 mobile-tablet:text-xs",children:"* 플랜 요청 시 지역을 설정할 수 있어요."}),(0,a.jsx)(x.A,{category:"locations",selectedTypes:c.map(e=>{var s;return(null===(s=N.A.locations.find(s=>s.mapping===e))||void 0===s?void 0:s.name)||e}),toggleSelection:e=>{A(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])}})]})]})})]}),(0,a.jsxs)("div",{className:"grid gap-8 pb-16 pc:grid-cols-2 mobile-tablet:flex mobile-tablet:flex-col mobile-tablet:gap-4",children:[(0,a.jsx)(g.A,{type:"button",label:"취소",onClick:()=>{B.push("/signup")},className:"bold border border-color-gray-200 bg-color-gray-50 text-color-black-300 mobile-tablet:order-2"}),(0,a.jsx)(g.A,{type:"submit",label:"수정하기",disabled:!$,className:"text-color-gray-50 mobile-tablet:order-1"})]})]})]})}function k(){return(0,a.jsx)(A,{})}let P=(0,l(4107).A)(k)},4107:(e,s,l)=>{"use strict";l.d(s,{A:()=>m});var a=l(77528),r=l(74848),t=l(96540),o=l(86715),i=l(12828),n=l(5279),c=l(29965),d=l.n(c);let m=e=>s=>{let l=(0,o.useRouter)(),[c,m]=(0,t.useState)(null),[p,g]=(0,t.useState)(!0);return((0,t.useEffect)(()=>{let e=(0,i.iD)();if(e){if("/login"===l.pathname||"/signup"===l.pathname){l.push("/");return}m(e)}else"/login"!==l.pathname&&"/signup"!==l.pathname&&l.push("/login");g(!1)},[l]),p)?(0,r.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,r.jsx)(d(),{src:n.A,alt:"로딩 중"})}):c||"/login"===l.pathname||"/signup"===l.pathname?(0,r.jsx)(e,(0,a._)({},s)):null}},9593:(e,s,l)=>{"use strict";l.d(s,{A:()=>a});let a={services:[{name:"맛집 탐방형",mapping:"FOOD_TOUR"},{name:"기념품/쇼핑형",mapping:"SHOPPING"},{name:"휴양형",mapping:"RELAXATION"},{name:"문화/역사탐방형",mapping:"CULTURE"},{name:"액티비티/탐험형",mapping:"ACTIVITY"},{name:"축제참여형",mapping:"FESTIVAL"}],locations:[{name:"서울",mapping:"SEOUL"},{name:"부산",mapping:"BUSAN"},{name:"인천",mapping:"INCHEON"},{name:"대구",mapping:"DAEGU"},{name:"대전",mapping:"DAEJEON"},{name:"광주",mapping:"GWANGJU"},{name:"울산",mapping:"ULSAN"},{name:"세종",mapping:"SEJONG"},{name:"경기",mapping:"GYEONGGI"},{name:"강원",mapping:"GANGWON"},{name:"충북",mapping:"CHUNGBUK"},{name:"충남",mapping:"CHUNGNAM"},{name:"전북",mapping:"JEONBUK"},{name:"전남",mapping:"JEONNAM"},{name:"경북",mapping:"GYEONGBUK"},{name:"경남",mapping:"GYEONGNAM"},{name:"제주",mapping:"JEJU"}]}},20812:(e,s,l)=>{"use strict";l.d(s,{GU:()=>i,Mh:()=>o,Sd:()=>t,X5:()=>r,dr:()=>n});var a=l(14476);let r=a.z.object({email:a.z.string().min(1,"이메일을 입력해 주세요.").email("이메일 형식이 아닙니다."),password:a.z.string().nonempty("비밀번호를 입력해 주세요.").min(6,"비밀번호는 최소 6자 이상이어야 합니다.")}),t=a.z.object({nickName:a.z.string().min(1,{message:"닉네임을 입력해 주세요."}),email:a.z.string().min(1,{message:"이메일을 입력해 주세요."}).email({message:"이메일 형식이 아닙니다."}),phoneNumber:a.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),password:a.z.string().min(6,"비밀번호는 최소 6자 이상이어야 합니다."),confirmPassword:a.z.string().min(1,{message:"비밀번호 확인란을 입력해 주세요."}),role:a.z.enum(["MAKER","DREAMER"],{message:"역할을 선택해 주세요."})}).refine(e=>e.password===e.confirmPassword,{path:["confirmPassword"],message:"비밀번호가 일치하지 않습니다."}),o=a.z.object({nickName:a.z.string().min(1,{message:"닉네임을 입력해 주세요."}),email:a.z.string().min(1,{message:"이메일을 입력해 주세요."}),phoneNumber:a.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),password:a.z.string().optional(),newPassword:a.z.string().optional(),newConfirmPassword:a.z.string().optional(),selectedServices:a.z.array(a.z.string()).optional(),selectedLocations:a.z.array(a.z.string()).optional()}).superRefine((e,s)=>{(e.newPassword||e.newConfirmPassword)&&(e.password||s.addIssue({code:"custom",path:["password"],message:"현재 비밀번호를 입력해 주세요."}),e.newPassword&&e.newPassword.length<6&&s.addIssue({code:"custom",path:["newPassword"],message:"새 비밀번호는 최소 6자 이상이어야 합니다."}),e.newPassword!==e.newConfirmPassword&&s.addIssue({code:"custom",path:["newConfirmPassword"],message:"새 비밀번호가 일치하지 않습니다."}))}),i=a.z.object({nickName:a.z.string().min(1,{message:"닉네임을 입력해 주세요."}),email:a.z.string().min(1,{message:"이메일을 입력해 주세요."}),phoneNumber:a.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),password:a.z.string().optional(),newPassword:a.z.string().optional(),newConfirmPassword:a.z.string().optional()}).refine(e=>!e.newPassword||e.password,{path:["password"],message:"새 비밀번호를 설정하려면 현재 비밀번호를 입력해 주세요."}).refine(e=>!e.newPassword||e.newPassword.length>=6,{path:["newPassword"],message:"새 비밀번호는 최소 6자 이상이어야 합니다."}).refine(e=>!e.newPassword||e.newPassword===e.newConfirmPassword,{path:["newConfirmPassword"],message:"새 비밀번호가 일치하지 않습니다."}),n=a.z.object({nickName:a.z.string().min(1,{message:"닉네임을 입력해 주세요."}),phoneNumber:a.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),role:a.z.enum(["MAKER","DREAMER"],{message:"역할을 선택해 주세요."})})}},e=>{var s=s=>e(e.s=s);e.O(0,[106,636,593,792],()=>s(20648)),_N_E=e.O()}]);