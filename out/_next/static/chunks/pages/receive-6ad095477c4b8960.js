(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[303],{77317:(e,s,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/receive",function(){return l(41481)}])},41481:(e,s,l)=>{"use strict";l.r(s),l.d(s,{Receive:()=>w,default:()=>_});var t=l(74848),a=l(29965),i=l.n(a),c=l(42897),r=l(93708),n=l(68264),d=l(41540),o=l(3886),x=l(96540),u=l(98649),m=l(70539),h=l(13814),p=l(82521),j=l(91553),v=l(24880),f=l(98599),b=l(85692),g=l(85030),N=l(91106),y=l.n(N),S=l(4107),A=l(5279);function w(){var e;let[s,l]=(0,x.useState)(!1),[a,N]=(0,x.useState)(!1),[S,w]=(0,x.useState)(!1),[_,k]=(0,x.useState)("SCHEDULE_FIRST"),[E,T]=(0,x.useState)(null),[C,M]=(0,x.useState)(""),[P,q]=(0,x.useState)(""),[R,X]=(0,x.useState)([]),{ref:D,inView:F}=(0,b.Wx)(),{data:O,isLoading:z,fetchNextPage:H,hasNextPage:I,isFetchingNextPage:K,isFetching:L}=(0,j.q)({queryKey:["receiveRequest",{isAssigned:!0,tripType:R,keyword:P,orderBy:_}],initialPageParam:1,queryFn:e=>{let{pageParam:s=1}=e;return(0,f.Ay)({isAssigned:!0,tripType:R.length>0?R:void 0,keyword:P||void 0,orderBy:_,page:s,pageSize:5})},getNextPageParam:(e,s)=>5===e.list.length?s.length+1:void 0,placeholderData:v.rX});(0,x.useEffect)(()=>{F&&I&&H()},[F,H,I]);let Q=(null==O?void 0:O.pages.flatMap(e=>e.list))||[],U=(null==O?void 0:null===(e=O.pages[0])||void 0===e?void 0:e.totalCount)||0,W=!z&&Q.length>0,B=e=>{T(e),N(!0)},G=e=>{T(e),w(!0)};return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"mx-[auto] w-full mobile:mx-[auto] tablet:mx-[auto]",children:(0,t.jsxs)("div",{className:"mb-8 flex items-center gap-8 border-b border-color-line-200",children:[(0,t.jsx)(y(),{href:"/receive",children:(0,t.jsx)("p",{className:"text-4 cursor-pointer border-b-[3px] border-black py-6 semibold",children:"받은 견적 요청"})}),(0,t.jsx)(y(),{href:"/all-receive-plan",children:(0,t.jsx)("p",{className:"text-4 cursor-pointer semibold",children:"전체 플랜"})})]})}),(0,t.jsxs)("div",{className:"flex gap-[107px]",children:[(0,t.jsx)(c.A,{data:null==O?void 0:O.pages[0],setSelectedTypes:X}),(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsx)(p.A,{value:C,onChange:e=>{M(e.target.value),""===e.target.value&&q("")},onSearch:e=>{M(e),q(e)}}),(0,t.jsxs)("div",{className:"mb-8 mt-4 flex w-full items-center justify-between mobile:mx-[auto] tablet:mx-[auto]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("p",{className:"semibold",children:["전체 ",U," 건"]}),L&&!z&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-blue-500",children:[(0,t.jsx)("div",{className:"h-2 w-2 animate-pulse rounded-full bg-blue-500"}),(0,t.jsx)("span",{className:"text-sm",children:"필터링 중..."})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-[4px]",children:[(0,t.jsx)(r.A,{onSort:k,currentSort:_}),(0,t.jsx)(i(),{src:d.A,className:"pc:hidden mobile-tablet:block",alt:"filter",width:32,height:32,onClick:()=>l(!0)})]})]}),z?(0,t.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,t.jsx)(i(),{src:A.A,alt:"로딩 중"})}):(0,t.jsxs)("div",{className:"transition-opacity duration-300 ".concat(L?"opacity-60":"opacity-100"),children:[W?Q.map((e,s)=>(0,t.jsx)("div",{className:"transform transition-all duration-300 hover:scale-[1.01]",children:(0,t.jsx)(n.A,{data:e,onSendQuotation:()=>B(e.id),onReject:()=>G(e.id)})},"".concat(e.id,"-").concat(s))):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,t.jsx)(i(),{src:g.A,alt:"request_empty",width:300,height:300}),(0,t.jsx)("p",{className:"text-xl semibold text-color-gray-300",children:"아직 받은 요청이 없어요!"})]}),(0,t.jsx)("div",{ref:D,className:"h-10",children:K&&(0,t.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,t.jsx)("span",{children:"더 불러오는 중..."})})})]})]})]}),s&&(0,t.jsx)(o.A,{closeModal:()=>l(!1),data:null==O?void 0:O.pages[0],selectedTypes:R,setSelectedTypes:X}),a&&(0,t.jsx)(m.A,{label:"견적 보내기",closeModal:()=>N(!1),children:(0,t.jsx)(u.A,{data:Q.find(e=>e.id===E),closeModal:()=>N(!1)})}),S&&(0,t.jsx)(m.A,{label:"요청 반려하기",closeModal:()=>w(!1),children:(0,t.jsx)(h.A,{data:Q.find(e=>e.id===E),closeModal:()=>w(!1)})})]})}let _=(0,S.A)(w)}},e=>{var s=s=>e(e.s=s);e.O(0,[128,577,636,593,792],()=>s(77317)),_N_E=e.O()}]);