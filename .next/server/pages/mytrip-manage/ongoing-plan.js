try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="8aabf8e6-e95c-4659-9909-d9088390b267",e._sentryDebugIdIdentifier="sentry-dbid-8aabf8e6-e95c-4659-9909-d9088390b267")}catch(e){}"use strict";(()=>{var e={};e.id=873,e.ids=[220,636,873],e.modules={89147:(e,t,r)=>{r.r(t),r.d(t,{default:()=>y,getServerSideProps:()=>m,getStaticProps:()=>u});var a=r(77134),n=r(8732),s=r(20883),o=Object.freeze({__proto__:null,default:function(){return(0,n.jsxs)(s.Html,{lang:"ko","data-sentry-element":"Html","data-sentry-component":"Document","data-sentry-source-file":"_document.tsx",children:[(0,n.jsxs)(s.Head,{"data-sentry-element":"Head","data-sentry-source-file":"_document.tsx",children:[(0,n.jsx)("meta",{name:"description",content:"당신만의 특별한 여행을 만나보세요","data-sentry-element":"meta","data-sentry-source-file":"_document.tsx"}),(0,n.jsx)("meta",{name:"keywords",content:"여행, 하와이, 여행플래너","data-sentry-element":"meta","data-sentry-source-file":"_document.tsx"}),(0,n.jsx)("meta",{name:"author",content:"니가가라 하와이","data-sentry-element":"meta","data-sentry-source-file":"_document.tsx"}),(0,n.jsx)("meta",{property:"og:type",content:"website","data-sentry-element":"meta","data-sentry-source-file":"_document.tsx"}),(0,n.jsx)("meta",{property:"og:title",content:"니가가라 하와이","data-sentry-element":"meta","data-sentry-source-file":"_document.tsx"}),(0,n.jsx)("meta",{property:"og:description",content:"당신만의 특별한 여행을 만나보세요","data-sentry-element":"meta","data-sentry-source-file":"_document.tsx"}),(0,n.jsx)("meta",{property:"og:image",content:"https://scontent-ssn1-1.cdninstagram.com/v/t51.29350-15/440535983_1166519591460822_7666710914928913519_n.jpg","data-sentry-element":"meta","data-sentry-source-file":"_document.tsx"}),(0,n.jsx)("meta",{property:"og:url",content:"https://fs2-4-team2-go-for-me.vercel.app","data-sentry-element":"meta","data-sentry-source-file":"_document.tsx"}),(0,n.jsx)("script",{src:"https://t1.kakaocdn.net/kakao_js_sdk/2.7.4/kakao.min.js",integrity:"sha384-DKYJZ8NLiK8MN4/C5P2dtSmLQ4KwPaoqAfyA/DfmEc1VDxu4yyC7wy6K1Hs90nka",crossOrigin:"anonymous",async:!0}),(0,n.jsx)("script",{async:!0,defer:!0,crossOrigin:"anonymous",src:"https://connect.facebook.net/ko_KR/sdk.js#xfbml=1&version=v18.0&appId=470777216098250"})]}),(0,n.jsxs)("body",{children:[(0,n.jsx)(s.Main,{"data-sentry-element":"Main","data-sentry-source-file":"_document.tsx"}),(0,n.jsx)(s.NextScript,{"data-sentry-element":"NextScript","data-sentry-source-file":"_document.tsx"})]})]})}});let i=o?o.default:void 0,l=i?i.getInitialProps:void 0,c=o?o.getStaticProps:void 0,d=o?o.getServerSideProps:void 0,p={"/_app":a.wrapAppGetInitialPropsWithSentry,"/_document":a.wrapDocumentGetInitialPropsWithSentry,"/_error":a.wrapErrorGetInitialPropsWithSentry}["/_document"]||a.wrapGetInitialPropsWithSentry;i&&"function"==typeof l&&(i.getInitialProps=p(l));let u="function"==typeof c?a.wrapGetStaticPropsWithSentry(c,"/_document"):void 0,m="function"==typeof d?a.wrapGetServerSidePropsWithSentry(d,"/_document"):void 0,y=i?a.wrapPageComponentWithSentry(i):i},19791:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>w,getServerSideProps:()=>j,getStaticProps:()=>S});var n=r(77134),s=r(8732),o=r(16672),i=r(47653),l=r(31727),c=r(90175),d=r(96733),p=r(28462),u=r(82015),m=r(86715),y=r(36218),x=e([d,p,y]);[d,p,y]=x.then?(await x)():x;var g=Object.freeze({__proto__:null,default:function(){let e=(0,m.useRouter)(),[t,r]=(0,u.useState)(!1),[a,n]=(0,u.useState)(null),{ref:x,inView:g}=(0,y.useInView)(),{data:f,fetchNextPage:h,hasNextPage:b,isFetchingNextPage:P}=(0,p.useInfiniteQuery)({queryKey:["ongoingPlans",{status:["PENDING","CONFIRMED"]}],initialPageParam:1,queryFn:({pageParam:e=1})=>d.A.getPlanList({status:["PENDING","CONFIRMED"],page:e,pageSize:5}),getNextPageParam:(e,t)=>5===e.list.length?t.length+1:void 0,enabled:!!a,placeholderData:p.keepPreviousData}),v=f?.pages.map(e=>e.list).flat()||[];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.A,{"data-sentry-element":"MyPlanNav","data-sentry-source-file":"index.tsx"}),(0,s.jsx)(i.A,{bodyClass:"bg-gray","data-sentry-element":"Layout","data-sentry-source-file":"index.tsx",children:(0,s.jsx)(l.A,{title:"진행 중인",status:"ongoing",visiblePlans:v,fetchNextPage:h,hasNextPage:b,isFetchingNextPage:P,"data-sentry-element":"MyPlanList","data-sentry-source-file":"index.tsx"})}),(0,s.jsx)("div",{ref:x,className:"h-10",children:P&&(0,s.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,s.jsx)("span",{children:"플랜을 불러오는 중..."})})}),t&&(0,s.jsxs)(c.A,{label:"로그인 필요",closeModal:()=>r(!1),children:[(0,s.jsx)("p",{className:"text-lg",children:"로그인이 필요한 서비스입니다."}),(0,s.jsxs)("div",{className:"mt-6 flex justify-end space-x-4",children:[(0,s.jsx)("button",{className:"px-4 py-2 text-gray-500",onClick:()=>{r(!1),e.push("/")},children:"취소"}),(0,s.jsx)("button",{className:"rounded-lg bg-blue-500 px-4 py-2 text-white",onClick:()=>{r(!1),e.push("/login")},children:"확인"})]})]})]})}});let f=g?g.default:void 0,h=f?f.getInitialProps:void 0,b=g?g.getStaticProps:void 0,P=g?g.getServerSideProps:void 0,v=(n.wrapAppGetInitialPropsWithSentry,n.wrapDocumentGetInitialPropsWithSentry,n.wrapErrorGetInitialPropsWithSentry,n.wrapGetInitialPropsWithSentry);f&&"function"==typeof h&&(f.getInitialProps=v(h));let S="function"==typeof b?n.wrapGetStaticPropsWithSentry(b,"/mytrip-manage/ongoing-plan"):void 0,j="function"==typeof P?n.wrapGetServerSidePropsWithSentry(P,"/mytrip-manage/ongoing-plan"):void 0,w=f?n.wrapPageComponentWithSentry(f):f;a()}catch(e){a(e)}})},30671:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},71126:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{config:()=>x,default:()=>p,getServerSideProps:()=>y,getStaticPaths:()=>m,getStaticProps:()=>u,reportWebVitals:()=>g,routeModule:()=>S,unstable_getServerProps:()=>P,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>h,unstable_getStaticProps:()=>f});var n=r(63865),s=r(9455),o=r(30671),i=r(89147),l=r(56403),c=r(19791),d=e([l,c]);[l,c]=d.then?(await d)():d;let p=(0,o.M)(c,"default"),u=(0,o.M)(c,"getStaticProps"),m=(0,o.M)(c,"getStaticPaths"),y=(0,o.M)(c,"getServerSideProps"),x=(0,o.M)(c,"config"),g=(0,o.M)(c,"reportWebVitals"),f=(0,o.M)(c,"unstable_getStaticProps"),h=(0,o.M)(c,"unstable_getStaticPaths"),b=(0,o.M)(c,"unstable_getStaticParams"),P=(0,o.M)(c,"unstable_getServerProps"),v=(0,o.M)(c,"unstable_getServerSideProps"),S=new n.PagesRouteModule({definition:{kind:s.A.PAGES,page:"/mytrip-manage/ongoing-plan",pathname:"/mytrip-manage/ongoing-plan",bundlePath:"",filename:""},components:{App:l.default,Document:i.default},userland:c});a()}catch(e){a(e)}})},47653:(e,t,r)=>{r.d(t,{A:()=>n});var a=r(8732);function n({children:e,bodyClass:t}){return(0,a.jsx)(a.Fragment,{children:e})}r(82015)},31727:(e,t,r)=>{r.d(t,{A:()=>i});var a=r(8732),n=r(82015),s=r(86715);let o=(0,n.forwardRef)(({visiblePlans:e,title:t,fetchNextPage:r,hasNextPage:o,isFetchingNextPage:i},l)=>{let c=(0,s.useRouter)(),d=e=>{let t=c.pathname,r="/";t.includes("ongoing-plan")?r="/mytrip-manage/ongoing-plan/detail":t.includes("completed-plan")?r="/mytrip-manage/completed-plan/detail":t.includes("overdue-plan")&&(r="/mytrip-manage/overdue-plan/detail");let a=`${r}/${e}`;c.push(a)};return(0,n.useEffect)(()=>{if(!l||!("current"in l)||!l.current||!o)return;let e=new IntersectionObserver(e=>{e[0].isIntersecting&&o&&!i&&r()},{threshold:1});return e.observe(l.current),()=>e.disconnect()},[l,o,i,r]),(0,a.jsxs)("div",{className:"my-12 flex flex-col rounded-2xl border-color-gray-300 bg-color-gray-50 shadow",children:[(0,a.jsx)("div",{className:"semibold px-8 pt-8 text-2xl",children:`${t} 플랜 목록`}),(0,a.jsxs)("div",{className:"flex-col p-8",children:[e.map(e=>(0,a.jsxs)("div",{className:"mb-3 flex justify-between rounded-2xl border-color-gray-300 bg-color-gray-50 p-2 shadow",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"semibold px-2 pt-2 text-2lg",children:e.title}),(0,a.jsx)("div",{className:"semibold px-2 pt-2 text-lg",children:e.serviceArea})]}),(0,a.jsx)("button",{className:"min-w-38 semibold text-nowrap rounded-lg border-[1px] border-solid border-color-blue-300 bg-color-gray-50 px-[32.5px] py-4 text-xl text-color-blue-300 mobile:text-md tablet:text-lg mobile-tablet:px-[16px] mobile-tablet:py-[6px]",onClick:()=>d(e.id),children:"플랜 상세"})]},e.id)),o&&!i&&(0,a.jsx)("div",{ref:l,className:"h-12 content-center rounded-xl bg-gray-200 text-center",children:"아래로 내려서 더 보기"})]})]})});o.displayName="MyPlanList";let i=o},16672:(e,t,r)=>{r.d(t,{A:()=>i});var a=r(8732),n=r(91106),s=r.n(n),o=r(86715);function i(){let e=(0,o.useRouter)().pathname.split("/").pop();return(0,a.jsx)("div",{className:"relative left-1/2 w-screen -translate-x-1/2 bg-color-background-100 px-[260px] mobile:px-6 tablet:px-[72px]","data-sentry-component":"MyPlanNav","data-sentry-source-file":"MyPlanNav.tsx",children:(0,a.jsxs)("div",{className:"max-w-screen-xl semibold mx-auto flex gap-[32px] px-[16px] text-xl text-color-gray-400 mobile-tablet:gap-[24px] mobile-tablet:text-md",children:[(0,a.jsx)(s(),{href:"/mytrip-manage/ongoing-plan","data-sentry-element":"Link","data-sentry-source-file":"MyPlanNav.tsx",children:(0,a.jsx)("button",{className:`py-[16px] ${"ongoing-plan"===e?"border-b-2 border-color-black-500 text-color-black-500":""}`,children:"진행 중인 플랜"})}),(0,a.jsx)(s(),{href:"/mytrip-manage/completed-plan","data-sentry-element":"Link","data-sentry-source-file":"MyPlanNav.tsx",children:(0,a.jsx)("button",{className:`py-[16px] ${"completed-plan"===e?"border-b-2 border-black text-color-black-500":""}`,children:"종료된 플랜"})}),(0,a.jsx)(s(),{href:"/mytrip-manage/overdue-plan","data-sentry-element":"Link","data-sentry-source-file":"MyPlanNav.tsx",children:(0,a.jsx)("button",{className:`py-[16px] ${"overdue-plan"===e?"border-b-2 border-black text-color-black-500":""}`,children:"만료된 플랜"})})]})})}},96733:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{A:()=>o});var n=r(65787),s=e([n]);n=(s.then?(await s)():s)[0];let o={planRequest:async e=>{try{return await n.F.post("/plans",e)}catch(e){throw console.error("여행 요청 실패",e),e}},getPlanList:async({status:e=[],page:t=1,pageSize:r=5})=>{try{let a="",s=[];e.length>0&&e.forEach(e=>{s.push(`status=${e}`)}),s.push(`page=${t}`),s.push(`pageSize=${r}`),a=s.length>0?`?${s.join("&")}`:"";let o=await n.F.get(`/plans/dreamer${a}`);if(!o)return console.warn("데이터가 없습니다. 빈 데이터를 반환합니다."),{totalCount:0,list:[]};return o}catch(e){throw console.error("여행 조회 실패",e),e}},getPlanDetail:async e=>{try{return await n.F.get(`/plans/${e}`)}catch(e){throw console.error("여행 데이터 요청 실패",e),e}},getPendingPlan:async()=>{try{return(await n.F.get("/plans/dreamer?status=PENDING")).list}catch(e){console.error("지정 플랜 조회 실패",e)}},postPlanRequest:async(e,t)=>{try{return await n.F.post(`/plans/${e}/assign`,{assigneeId:t})}catch(e){if(e.response&&409===e.response.status)throw Error("이미 지정 견적을 요청하셨습니다!")}},getStatistics:async e=>{try{let t=e?`?serviceArea=${e}`:"";return await n.F.get(`/plans/groupCount${t}`)}catch(e){throw console.error("통계 자료 조회 실패",e),e}}};a()}catch(e){a(e)}})},9455:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return r}});var r=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},56472:e=>{e.exports=require("@opentelemetry/api")},77134:e=>{e.exports=require("@sentry/nextjs")},87302:e=>{e.exports=require("event-source-polyfill")},40361:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},82015:e=>{e.exports=require("react")},22326:e=>{e.exports=require("react-dom")},8732:e=>{e.exports=require("react/jsx-runtime")},29021:e=>{e.exports=require("fs")},33873:e=>{e.exports=require("path")},27910:e=>{e.exports=require("stream")},74075:e=>{e.exports=require("zlib")},94862:e=>{e.exports=import("@portone/browser-sdk/v2")},28462:e=>{e.exports=import("@tanstack/react-query")},1428:e=>{e.exports=import("axios")},36218:e=>{e.exports=import("react-intersection-observer")},72177:e=>{e.exports=import("zustand")},52870:e=>{e.exports=import("zustand/middleware")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[848,860,883,403],()=>r(71126));module.exports=a})();
//# sourceMappingURL=ongoing-plan.js.map