(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[895],{7450:(e,s,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/all-receive-plan",function(){return l(1004)}])},1004:(e,s,l)=>{"use strict";l.r(s),l.d(s,{AllReceivePlan:()=>S,default:()=>A});var t=l(4848),a=l(9965),i=l.n(a),n=l(2897),r=l(3708),c=l(8264),d=l(1540),o=l(3886),x=l(6540),u=l(8649),h=l(539),m=l(3814),p=l(2521),j=l(1553),v=l(4880),f=l(8599),g=l(5692),b=l(2393),N=l(1106),y=l.n(N);function S(){var e;let[s,l]=(0,x.useState)(!1),[a,N]=(0,x.useState)(!1),[S,A]=(0,x.useState)(!1),[w,_]=(0,x.useState)("SCHEDULE_FIRST"),[k,E]=(0,x.useState)(""),[T,P]=(0,x.useState)(""),[C,M]=(0,x.useState)([]),[q,R]=(0,x.useState)(null),{ref:X,inView:D}=(0,g.Wx)(),{data:F,isLoading:L,fetchNextPage:O,hasNextPage:z,isFetchingNextPage:B,isFetching:H}=(0,j.q)({queryKey:["receiveRequest",{isAssigned:!1,tripType:C,keyword:T,orderBy:w}],initialPageParam:1,queryFn:e=>{let{pageParam:s=1}=e;return(0,f.Ay)({isAssigned:!1,tripType:C.length>0?C:void 0,keyword:T||void 0,orderBy:w,page:s,pageSize:5})},getNextPageParam:(e,s)=>5===e.list.length?s.length+1:void 0,placeholderData:v.rX});(0,x.useEffect)(()=>{D&&z&&O()},[D,O,z]);let I=(null==F?void 0:null===(e=F.pages[0])||void 0===e?void 0:e.totalCount)||0,K=(null==F?void 0:F.pages.flatMap(e=>e.list))||[],Q=e=>{R(e),N(!0)},U=()=>{A(!0)};return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"mx-[auto]  mobile:mx-[auto]  tablet:mx-[auto] w-full",children:(0,t.jsxs)("div",{className:"mb-8 flex items-center gap-8 border-b border-color-line-200",children:[(0,t.jsx)(y(),{href:"/receive",children:(0,t.jsx)("p",{className:"text-4 cursor-pointer font-semibold",children:"받은 견적 요청"})}),(0,t.jsx)(y(),{href:"/all-receive-plan",children:(0,t.jsx)("p",{className:"text-4 cursor-pointer border-b-[3px] border-black py-6 font-semibold",children:"전체 플랜"})})]})}),(0,t.jsxs)("div",{className:"flex gap-[107px]",children:[(0,t.jsx)(n.A,{data:null==F?void 0:F.pages[0],setSelectedTypes:M}),(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsx)(p.A,{value:k,onChange:e=>{E(e.target.value),""===e.target.value&&P("")},onSearch:e=>{E(e),P(e)}}),(0,t.jsxs)("div",{className:"mb-8 mt-4 flex w-full items-center justify-between mobile:mx-[auto] tablet:mx-[auto]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("p",{children:["전체 ",I," 건"]}),H&&!L&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-blue-500",children:[(0,t.jsx)("div",{className:"h-2 w-2 animate-pulse rounded-full bg-blue-500"}),(0,t.jsx)("span",{className:"text-sm",children:"필터링 중..."})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-[4px]",children:[(0,t.jsx)(r.A,{onSort:_,currentSort:w}),(0,t.jsx)(i(),{src:d.A,className:"pc:hidden mobile-tablet:block",alt:"filter",width:32,height:32,onClick:()=>l(!0)})]})]}),L?(0,t.jsx)("div",{className:"flex min-h-[200px] items-center justify-center",children:(0,t.jsx)("span",{children:"Loading..."})}):(0,t.jsxs)("div",{className:"transition-opacity duration-300 ".concat(H?"opacity-60":"opacity-100"),children:[K.length>0?K.map((e,s)=>(0,t.jsx)("div",{className:"transform transition-all duration-300 hover:scale-[1.01]",children:(0,t.jsx)(c.A,{data:e,onSendQuotation:()=>Q(e.id),onReject:U,oneButton:!0})},"".concat(e.id,"-").concat(s))):(0,t.jsx)("div",{className:"my-[180px] flex items-center justify-center",children:(0,t.jsx)(i(),{src:b.A,alt:"request_empty",width:180,height:180})}),(0,t.jsx)("div",{ref:X,className:"h-10",children:B&&(0,t.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,t.jsx)("span",{children:"더 불러오는 중..."})})})]})]})]}),s&&(0,t.jsx)(o.A,{closeModal:()=>l(!1),data:null==F?void 0:F.pages[0],selectedTypes:C,setSelectedTypes:M}),a&&(0,t.jsx)(h.A,{label:"견적 보내기",closeModal:()=>N(!1),children:(0,t.jsx)(u.A,{data:K.find(e=>e.id===q),closeModal:()=>N(!1)})}),S&&(0,t.jsx)(h.A,{label:"요청 반려하기",closeModal:()=>A(!1),children:(0,t.jsx)(m.A,{data:K.find(e=>e.id===q),closeModal:()=>A(!1)})})]})}let A=(0,l(4107).A)(S)}},e=>{var s=s=>e(e.s=s);e.O(0,[602,66,636,593,792],()=>s(7450)),_N_E=e.O()}]);