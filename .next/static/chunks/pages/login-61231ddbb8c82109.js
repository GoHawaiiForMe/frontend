(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{5461:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return t(6603)}])},5092:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r={src:"/_next/static/media/icon_google.879cad24.svg",height:72,width:72,blurWidth:0,blurHeight:0}},2324:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r={src:"/_next/static/media/icon_kakao.c29eeafe.svg",height:72,width:72,blurWidth:0,blurHeight:0}},2889:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r={src:"/_next/static/media/icon_naver.ae6e4dc0.svg",height:72,width:72,blurWidth:0,blurHeight:0}},6491:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});var r=t(4848);let a=e=>{let{label:s,onClick:t,disabled:a=!1,className:o="",type:n="button"}=e;return(0,r.jsx)("button",{type:n,className:"w-full py-4 bg-color-blue-300 bold rounded-2xl  text-xl mobile-tablet:text-lg ".concat(a?"bg-color-gray-100 cursor-not-allowed":"bg-color-blue-300"," ").concat(o),onClick:t,disabled:a,children:s})}},6534:(e,s,t)=>{"use strict";t.d(s,{A:()=>d});var r=t(4848),a=t(6540),o=t(9965),n=t.n(o);let l={src:"/_next/static/media/icon_visibility_off.7dedf543.svg",height:24,width:24,blurWidth:0,blurHeight:0},i={src:"/_next/static/media/icon_visibility_on.6f9063a3.svg",height:24,width:24,blurWidth:0,blurHeight:0},c=(0,a.forwardRef)((e,s)=>{let{label:t,type:o,name:c,value:d,onChange:m,placeholder:g="",className:h="",error:u=!1,...w}=e,[p,x]=a.useState(!1),b="textarea"===o?(0,r.jsx)("textarea",{ref:s,name:c,value:d,onChange:m,placeholder:g,className:"mb-4 h-40 w-full resize-none rounded-xl border bg-color-gray-50 p-4 ".concat(h),...w}):"password"===o?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{ref:s,type:p?"text":"password",name:c,value:d,onChange:m,placeholder:g,className:"h-16 w-full rounded-xl border p-4 pc:text-xl mobile-tablet:text-lg ".concat(u?"border-color-red-200":"border-color-blue-300"," ").concat(h),...w}),(0,r.jsx)(n(),{src:p?i:l,onClick:()=>{x(e=>!e)},width:24,height:24,alt:p?"비밀번호 보기":"비밀번호 감추기",className:"absolute right-5 top-1/2 -translate-y-1/2 transform cursor-pointer"})]}):(0,r.jsx)("input",{ref:s,className:"h-16 w-full rounded-xl border p-4 pc:text-xl mobile-tablet:text-lg ".concat(u?"border-color-red-200":"border-color-blue-300"," ").concat(h),type:o,name:c,value:d,onChange:m,placeholder:g,...w});return(0,r.jsxs)("div",{children:[t&&(0,r.jsx)("label",{className:"semibold mb-4 block pc:text-xl mobile-tablet:text-lg",htmlFor:c,children:t}),b]})});c.displayName="Input";let d=c},6603:(e,s,t)=>{"use strict";t.r(s),t.d(s,{LoginPage:()=>k,default:()=>A});var r=t(4848),a=t(3504),o=t(6534),n=t(6491),l=t(1106),i=t.n(l),c=t(9965),d=t.n(c),m=t(6616),g=t(8871),h=t(9785),u=t(812),w=t(5092),p=t(2324),x=t(2889),b=t(9241),f=t(6715),y=t(2309),j=t(2294);let N=async()=>await b.A.getUserInfo(),v=async e=>j.A.login(e);function z(){let e=(0,f.useRouter)(),{setLogin:s}=(0,a.A)(),t=(0,y.n)({mutationFn:v,onSuccess:async()=>{try{let t=await N();s(t.nickName,t.role,t.coconut),e.push("/")}catch(e){console.error("유저 정보 가져오기 실패",e)}},onError:e=>{e.response?(console.error("Error response",e.response),400===e.response.status&&alert("로그인에 실패했습니다. 이메일과 비밀번호를 확인해주세요.")):e.request?console.error(e.request):console.error(e.message)}}),{register:l,handleSubmit:c,watch:b,formState:{errors:z}}=(0,h.mN)({resolver:(0,g.u)(u.X5),mode:"onBlur"}),k=Object.values(b()).every(e=>(null==e?void 0:e.toString().trim())!==""),A=e=>{let{message:s}=e;return(0,r.jsx)("p",{className:"absolute right-0 mt-1 text-color-red-200",children:s})},P=async()=>{try{let e=await j.A.googleLogin();window.location.href=e}catch(e){console.error("구글 로그인 중 오류 발생",e),alert("구글 로그인에 실패했습니다. 다시 시도해주세요.")}},_=async()=>{try{let e=await j.A.kakaoLogin();window.location.href=e}catch(e){console.error("카카오 로그인 중 오류 발생",e),alert("카카오 로그인에 실패했습니다. 다시 시도해주세요.")}},C=async()=>{try{let e=await j.A.naverLogin();window.location.href=e}catch(e){console.error("네이버 로그인 중 오류 발생",e),alert("네이버 로그인에 실패했습니다. 다시 시도해주세요.")}};return(0,r.jsx)("div",{className:"my-24 flex justify-center",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-8 pc:w-[640px] mobile-tablet:w-[372px]",children:[(0,r.jsx)(d(),{src:m.A,width:400,height:400,alt:"로고"}),(0,r.jsxs)("form",{className:"relative flex w-full flex-col gap-8",onSubmit:c(e=>{t.mutate(e)}),children:[(0,r.jsxs)("div",{className:"mb-2",children:[(0,r.jsx)(o.A,{...l("email"),placeholder:"이메일을 입력해 주세요",type:"text",label:"이메일",error:!!z.email}),z.email&&(0,r.jsx)(A,{message:z.email.message})]}),(0,r.jsxs)("div",{className:"mb-2",children:[(0,r.jsx)(o.A,{...l("password"),placeholder:"비밀번호를 입력해 주세요",type:"password",label:"비밀번호",error:!!z.password}),z.password&&(0,r.jsx)(A,{message:z.password.message})]}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(n.A,{label:"로그인",type:"submit",disabled:!k,className:"text-color-gray-50"})})]}),(0,r.jsxs)("div",{className:"mb-10 flex justify-center pc:text-xl",children:[(0,r.jsx)("p",{className:"mr-2 text-lg mobile-tablet:text-xs",children:"아직 니가가라하와이 회원이 아니신가요?"}),(0,r.jsx)(i(),{href:"/signup",className:"text-lg text-color-blue-300 underline mobile-tablet:text-xs",children:"이메일로 회원가입하기"})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center gap-8",children:[(0,r.jsx)("h2",{className:"tablet:text-xs pc:text-xl",children:"SNS 계정으로 간편 가입하기"}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)("div",{onClick:P,className:"cursor-pointer",children:(0,r.jsx)(d(),{src:w.A,alt:"구글 아이콘",width:50,height:50})}),(0,r.jsx)("div",{onClick:_,className:"cursor-pointer",children:(0,r.jsx)(d(),{src:p.A,alt:"카카오 아이콘",width:50,height:50})}),(0,r.jsx)("div",{onClick:C,className:"cursor-pointer",children:(0,r.jsx)(d(),{src:x.A,alt:"네이버 아이콘",width:50,height:50})})]})]})]})})}function k(){return(0,r.jsx)(z,{})}let A=(0,t(4107).A)(k)},2294:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});var r=t(4996);let a={signUp:async(e,s)=>{try{let t=s?{headers:{Authorization:"Bearer ".concat(s)}}:{};if(t)return await r.F.post("/auth/signup",e,!0,t);return await r.F.post("/auth/signup")}catch(e){throw console.error("회원가입 실패",e),e}},checkNickName:async e=>{try{return await r.F.post("/auth/check/nickName",e)}catch(e){console.error("닉네임 체크 불가",e)}},checkEmail:async e=>{try{return await r.F.post("/auth/check/email",e)}catch(e){console.error("이메일 체크 불가",e)}},login:async e=>{try{let s=await r.F.post("/auth/login",e);return localStorage.setItem("accessToken",s.accessToken),s}catch(e){throw console.error("로그인 실패:",e),e}},googleLogin:async()=>{try{return(await r.F.get("/auth/google")).redirectUrl}catch(e){throw console.error("구글 로그인 실패",e),e}},kakaoLogin:async()=>{try{return(await r.F.get("/auth/kakao")).redirectUrl}catch(e){throw console.error("카카오 로그인 실패",e),e}},naverLogin:async()=>{try{return(await r.F.get("/auth/naver")).redirectUrl}catch(e){throw console.error("네이버 로그인 실패",e),e}}}},4107:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});var r=t(4848),a=t(6540),o=t(6715);let n=e=>s=>{let t=(0,o.useRouter)(),[n,l]=(0,a.useState)(null);return((0,a.useEffect)(()=>{let e=localStorage.getItem("accessToken");if(e){if("/login"===t.pathname||"/signup"===t.pathname){t.push("/");return}l(e)}else"/login"!==t.pathname&&"/signup"!==t.pathname&&t.push("/login")},[t,n]),n||"/login"===t.pathname||"/signup"===t.pathname)?(0,r.jsx)(e,{...s}):null}},812:(e,s,t)=>{"use strict";t.d(s,{GU:()=>l,Mh:()=>n,Sd:()=>o,X5:()=>a,dr:()=>i});var r=t(4476);let a=r.z.object({email:r.z.string().min(1,"이메일을 입력해 주세요.").email("이메일 형식이 아닙니다."),password:r.z.string().nonempty("비밀번호를 입력해 주세요.").min(6,"비밀번호는 최소 6자 이상이어야 합니다.")}),o=r.z.object({nickName:r.z.string().min(1,{message:"닉네임을 입력해 주세요."}),email:r.z.string().min(1,{message:"이메일을 입력해 주세요."}).email({message:"이메일 형식이 아닙니다."}),phoneNumber:r.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),password:r.z.string().min(6,"비밀번호는 최소 6자 이상이어야 합니다."),confirmPassword:r.z.string().min(1,{message:"비밀번호 확인란을 입력해 주세요."}),role:r.z.enum(["MAKER","DREAMER"],{message:"역할을 선택해 주세요."})}).refine(e=>e.password===e.confirmPassword,{path:["confirmPassword"],message:"비밀번호가 일치하지 않습니다."}),n=r.z.object({nickName:r.z.string().min(1,{message:"닉네임을 입력해 주세요."}),email:r.z.string().min(1,{message:"이메일을 입력해 주세요."}),phoneNumber:r.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),password:r.z.string().optional(),newPassword:r.z.string().optional(),newConfirmPassword:r.z.string().optional(),selectedServices:r.z.array(r.z.string()).optional(),selectedLocations:r.z.array(r.z.string()).optional()}).superRefine((e,s)=>{(e.newPassword||e.newConfirmPassword)&&(e.password||s.addIssue({code:"custom",path:["password"],message:"현재 비밀번호를 입력해 주세요."}),e.newPassword&&e.newPassword.length<6&&s.addIssue({code:"custom",path:["newPassword"],message:"새 비밀번호는 최소 6자 이상이어야 합니다."}),e.newPassword!==e.newConfirmPassword&&s.addIssue({code:"custom",path:["newConfirmPassword"],message:"새 비밀번호가 일치하지 않습니다."}))}),l=r.z.object({nickName:r.z.string().min(1,{message:"닉네임을 입력해 주세요."}),email:r.z.string().min(1,{message:"이메일을 입력해 주세요."}),phoneNumber:r.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),password:r.z.string().optional(),newPassword:r.z.string().optional(),newConfirmPassword:r.z.string().optional()}).refine(e=>!e.newPassword||e.password,{path:["password"],message:"새 비밀번호를 설정하려면 현재 비밀번호를 입력해 주세요."}).refine(e=>!e.newPassword||e.newPassword.length>=6,{path:["newPassword"],message:"새 비밀번호는 최소 6자 이상이어야 합니다."}).refine(e=>!e.newPassword||e.newPassword===e.newConfirmPassword,{path:["newConfirmPassword"],message:"새 비밀번호가 일치하지 않습니다."}),i=r.z.object({nickName:r.z.string().min(1,{message:"닉네임을 입력해 주세요."}),phoneNumber:r.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),role:r.z.enum(["MAKER","DREAMER"],{message:"역할을 선택해 주세요."})})}},e=>{var s=s=>e(e.s=s);e.O(0,[106,636,593,792],()=>s(5461)),_N_E=e.O()}]);