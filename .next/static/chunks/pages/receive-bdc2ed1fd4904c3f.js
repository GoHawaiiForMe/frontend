(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[303],{8104:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/receive",function(){return t(1276)}])},1276:(e,s,t)=>{"use strict";t.r(s),t.d(s,{Receive:()=>S,default:()=>w});var l=t(4848),a=t(9965),i=t.n(a),n=t(2897),r=t(3708),c=t(8264),d=t(1540),o=t(3886),x=t(6540),u=t(8649),h=t(539),m=t(3814),p=t(2521),j=t(1553),v=t(4880),f=t(8599),g=t(5692),b=t(2393),N=t(1106),y=t.n(N);function S(){var e;let[s,t]=(0,x.useState)(!1),[a,N]=(0,x.useState)(!1),[S,w]=(0,x.useState)(!1),[A,_]=(0,x.useState)("SCHEDULE_FIRST"),[k,E]=(0,x.useState)(null),[T,C]=(0,x.useState)(""),[M,P]=(0,x.useState)(""),[q,R]=(0,x.useState)([]),{ref:X,inView:D}=(0,g.Wx)(),{data:F,isLoading:L,fetchNextPage:O,hasNextPage:z,isFetchingNextPage:H,isFetching:I}=(0,j.q)({queryKey:["receiveRequest",{isAssigned:!0,tripType:q,keyword:M,orderBy:A}],initialPageParam:1,queryFn:e=>{let{pageParam:s=1}=e;return(0,f.Ay)({isAssigned:!0,tripType:q.length>0?q:void 0,keyword:M||void 0,orderBy:A,page:s,pageSize:5})},getNextPageParam:(e,s)=>5===e.list.length?s.length+1:void 0,placeholderData:v.rX});(0,x.useEffect)(()=>{D&&z&&O()},[D,O,z]);let K=(null==F?void 0:null===(e=F.pages[0])||void 0===e?void 0:e.totalCount)||0,Q=(null==F?void 0:F.pages.flatMap(e=>e.list))||[],U=e=>{E(e),N(!0)},W=e=>{E(e),w(!0)};return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"mx-[auto] w-full  mobile:mx-[auto] tablet:mx-[auto]",children:(0,l.jsxs)("div",{className:"mb-8 flex items-center gap-8 border-b border-color-line-200",children:[(0,l.jsx)(y(),{href:"/receive",children:(0,l.jsx)("p",{className:"text-4 cursor-pointer border-b-[3px] border-black py-6 font-semibold",children:"받은 견적 요청"})}),(0,l.jsx)(y(),{href:"/all-receive-plan",children:(0,l.jsx)("p",{className:"text-4 cursor-pointer font-semibold",children:"전체 플랜"})})]})}),(0,l.jsxs)("div",{className:"flex gap-[107px]",children:[(0,l.jsx)(n.A,{data:null==F?void 0:F.pages[0],setSelectedTypes:R}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)(p.A,{value:T,onChange:e=>{C(e.target.value),""===e.target.value&&P("")},onSearch:e=>{C(e),P(e)}}),(0,l.jsxs)("div",{className:"mb-8 mt-4 flex w-full items-center justify-between mobile:mx-[auto] tablet:mx-[auto]",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)("p",{children:["전체 ",K," 건"]}),I&&!L&&(0,l.jsxs)("div",{className:"flex items-center gap-2 text-blue-500",children:[(0,l.jsx)("div",{className:"h-2 w-2 animate-pulse rounded-full bg-blue-500"}),(0,l.jsx)("span",{className:"text-sm",children:"필터링 중..."})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-[4px]",children:[(0,l.jsx)(r.A,{onSort:_,currentSort:A}),(0,l.jsx)(i(),{src:d.A,className:"pc:hidden mobile-tablet:block",alt:"filter",width:32,height:32,onClick:()=>t(!0)})]})]}),L?(0,l.jsx)("div",{className:"flex min-h-[200px] items-center justify-center",children:(0,l.jsx)("span",{children:"Loading..."})}):(0,l.jsxs)("div",{className:"transition-opacity duration-300 ".concat(I?"opacity-60":"opacity-100"),children:[Q.length>0?Q.map((e,s)=>(0,l.jsx)("div",{className:"transform transition-all duration-300 hover:scale-[1.01]",children:(0,l.jsx)(c.A,{data:e,onSendQuotation:()=>U(e.id),onReject:()=>W(e.id)})},"".concat(e.id,"-").concat(s))):(0,l.jsx)("div",{className:"my-[180px] flex items-center justify-center",children:(0,l.jsx)(i(),{src:b.A,alt:"request_empty",width:180,height:180})}),(0,l.jsx)("div",{ref:X,className:"h-10",children:H&&(0,l.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,l.jsx)("span",{children:"더 불러오는 중..."})})})]})]})]}),s&&(0,l.jsx)(o.A,{closeModal:()=>t(!1),data:null==F?void 0:F.pages[0],selectedTypes:q,setSelectedTypes:R}),a&&(0,l.jsx)(h.A,{label:"견적 보내기",closeModal:()=>N(!1),children:(0,l.jsx)(u.A,{data:Q.find(e=>e.id===k),closeModal:()=>N(!1)})}),S&&(0,l.jsx)(h.A,{label:"요청 반려하기",closeModal:()=>w(!1),children:(0,l.jsx)(m.A,{data:Q.find(e=>e.id===k),closeModal:()=>w(!1)})})]})}let w=(0,t(4107).A)(S)}},e=>{var s=s=>e(e.s=s);e.O(0,[602,66,636,593,792],()=>s(8104)),_N_E=e.O()}]);