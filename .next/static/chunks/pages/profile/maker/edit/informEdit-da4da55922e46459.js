(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[967],{7436:(e,s,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/maker/edit/informEdit",function(){return r(2778)}])},6491:(e,s,r)=>{"use strict";r.d(s,{A:()=>o});var a=r(4848);let o=e=>{let{label:s,onClick:r,disabled:o=!1,className:l="",type:n="button"}=e;return(0,a.jsx)("button",{type:n,className:"w-full py-4 bg-color-blue-300 bold rounded-2xl  text-xl mobile-tablet:text-lg ".concat(o?"bg-color-gray-100 cursor-not-allowed":"bg-color-blue-300"," ").concat(l),onClick:r,disabled:o,children:s})}},6534:(e,s,r)=>{"use strict";r.d(s,{A:()=>m});var a=r(4848),o=r(6540),l=r(9965),n=r.n(l);let t={src:"/_next/static/media/icon_visibility_off.7dedf543.svg",height:24,width:24,blurWidth:0,blurHeight:0},i={src:"/_next/static/media/icon_visibility_on.6f9063a3.svg",height:24,width:24,blurWidth:0,blurHeight:0},d=(0,o.forwardRef)((e,s)=>{let{label:r,type:l,name:d,value:m,onChange:c,placeholder:u="",className:b="",error:g=!1,...p}=e,[h,w]=o.useState(!1),x="textarea"===l?(0,a.jsx)("textarea",{ref:s,name:d,value:m,onChange:c,placeholder:u,className:"mb-4 h-40 w-full resize-none rounded-xl border bg-color-gray-50 p-4 ".concat(b),...p}):"password"===l?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{ref:s,type:h?"text":"password",name:d,value:m,onChange:c,placeholder:u,className:"h-16 w-full rounded-xl border p-4 pc:text-xl mobile-tablet:text-lg ".concat(g?"border-color-red-200":"border-color-blue-300"," ").concat(b),...p}),(0,a.jsx)(n(),{src:h?i:t,onClick:()=>{w(e=>!e)},width:24,height:24,alt:h?"비밀번호 보기":"비밀번호 감추기",className:"absolute right-5 top-1/2 -translate-y-1/2 transform cursor-pointer"})]}):(0,a.jsx)("input",{ref:s,className:"h-16 w-full rounded-xl border p-4 pc:text-xl mobile-tablet:text-lg ".concat(g?"border-color-red-200":"border-color-blue-300"," ").concat(b),type:l,name:d,value:m,onChange:c,placeholder:u,...p});return(0,a.jsxs)("div",{children:[r&&(0,a.jsx)("label",{className:"semibold mb-4 block pc:text-xl mobile-tablet:text-lg",htmlFor:d,children:r}),x]})});d.displayName="Input";let m=d},2778:(e,s,r)=>{"use strict";r.r(s),r.d(s,{ProfileEditDreamerPage:()=>x,default:()=>N});var a=r(4848),o=r(9785),l=r(8871),n=r(6534),t=r(812),i=r(6491),d=r(6540),m=r(9241),c=r(6715),u=r(3504),b=r(7286),g=r(2309);let p=async()=>await m.A.getUserInfo(),h=async e=>m.A.patchBasicInfo(e);function w(){let{register:e,handleSubmit:s,watch:r,setValue:m,formState:{errors:w}}=(0,o.mN)({resolver:(0,l.u)(t.GU),mode:"onBlur"}),x=(0,c.useRouter)(),{setLogin:N}=(0,u.A)(),{data:f,isLoading:v,isError:j,refetch:k}=(0,b.I)({queryKey:["userInfo"],queryFn:p}),y=(0,g.n)({mutationFn:h,onSuccess:()=>{alert("프로필이 성공적으로 수정되었습니다!"),k()},onError:e=>{var s;(null===(s=e.response)||void 0===s?void 0:s.status)===401?alert("기존 비밀번호를 확인해주세요."):(console.error("메이커 프로필 수정 실패",e),alert("수정 중 문제가 발생했습니다. 다시 시도해주세요."))}}),P=async e=>{if(v||j){alert("사용자 정보를 불러오는 중입니다.");return}let s={nickName:(null==f?void 0:f.nickName)!==e.nickName?e.nickName:null==f?void 0:f.nickName,phoneNumber:(null==f?void 0:f.phoneNumber)!==e.phoneNumber?e.phoneNumber:null==f?void 0:f.phoneNumber,password:e.password?e.password:void 0,newPassword:e.newPassword||void 0};y.mutate(s),(null==f?void 0:f.nickName)!==e.nickName&&N(e.nickName,(null==f?void 0:f.role)||"guest",(null==f?void 0:f.coconut)||0)},z=r(),A=(()=>{var e;let{nickName:s,phoneNumber:r,password:a,newPassword:o,newConfirmPassword:l}=z,n=(null==a?void 0:a.trim())!==""||!o,t=(null==o?void 0:o.trim())!==""&&o===l,i=(null==f?void 0:f.nickName)!==s||(null==f?void 0:f.phoneNumber)!==r,d=!!(null===(e=z.password)||void 0===e?void 0:e.trim());return n&&(i||d||t)})(),C=e=>{let{message:s}=e;return(0,a.jsx)("p",{className:"mt-2 text-color-red-200",children:s})};return(0,d.useEffect)(()=>{f&&(m("nickName",f.nickName),m("email",f.email),m("phoneNumber",f.phoneNumber))},[f,m]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{className:"semibold mt-16 text-3xl",children:"기본정보 수정"}),(0,a.jsx)("div",{className:"my-8 h-0.5 bg-color-line-100"}),(0,a.jsxs)("form",{onSubmit:s(P),className:"w-full",children:[(0,a.jsxs)("div",{className:"${userInfo?.email ? 'pc:grid-cols-2' : 'pc:grid-cols-1'} grid w-full pc:gap-16 mobile-tablet:flex mobile-tablet:flex-col mobile-tablet:gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(n.A,{type:"text",label:"닉네임",placeholder:"기존 닉네임",...e("nickName"),error:!!w.nickName,className:"border-0 bg-color-background-200"}),w.nickName&&(0,a.jsx)(C,{message:w.nickName.message})]}),(0,a.jsx)("div",{className:"my-4 h-0.5 bg-color-line-100"}),(null==f?void 0:f.email)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:(0,a.jsx)(n.A,{type:"text",label:"이메일",value:null==f?void 0:f.email,disabled:!0,className:"border-0 bg-color-background-200 text-color-gray-300"})}),(0,a.jsx)("div",{className:"my-4 h-0.5 bg-color-line-100"})]}):null,(0,a.jsxs)("div",{className:"mb-16 mobile-tablet:m-0",children:[(0,a.jsx)(n.A,{type:"text",label:"전화번호",placeholder:"숫자만 입력해주세요",...e("phoneNumber"),error:!!w.phoneNumber,className:"border-0 bg-color-background-200"}),w.phoneNumber&&(0,a.jsx)(C,{message:w.phoneNumber.message})]}),(0,a.jsx)("div",{className:"h-0.5 bg-color-line-100 pc:hidden"})]}),(null==f?void 0:f.email)&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)("div",{children:(0,a.jsx)(n.A,{type:"password",label:"현재 비밀번호",placeholder:"현재 비밀번호를 입력해 주세요",className:"border-0 bg-color-background-200",...e("password")})}),(0,a.jsx)("div",{className:"my-4 h-0.5 bg-color-line-100"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(n.A,{type:"password",label:"새 비밀번호",placeholder:"비밀번호를 입력해 주세요",className:"border-0 bg-color-background-200",...e("newPassword"),error:!!w.password}),w.password&&(0,a.jsx)(C,{message:w.password.message})]}),(0,a.jsx)("div",{className:"my-4 h-0.5 bg-color-line-100"}),(0,a.jsxs)("div",{className:"mb-16",children:[(0,a.jsx)(n.A,{type:"password",label:"새 비밀번호 확인",placeholder:"비밀번호를 다시 한번 입력해 주세요",className:"border-0 bg-color-background-200",...e("newConfirmPassword"),error:!!w.newConfirmPassword}),w.newConfirmPassword&&(0,a.jsx)(C,{message:w.newConfirmPassword.message})]})]})})]}),(0,a.jsxs)("div",{className:"grid gap-8 pb-16 pc:grid-cols-2 mobile-tablet:flex mobile-tablet:flex-col mobile-tablet:gap-4",children:[(0,a.jsx)(i.A,{type:"button",label:"취소",onClick:()=>{x.push("/plan-request")},className:"bold border border-color-blue-300 bg-color-gray-50 text-color-blue-300 mobile-tablet:order-2"}),(0,a.jsx)(i.A,{type:"submit",label:"수정하기",disabled:!A,className:"text-white mobile-tablet:order-1"})]})]})]})}function x(){return(0,a.jsx)(w,{})}let N=(0,r(4107).A)(x)},4107:(e,s,r)=>{"use strict";r.d(s,{A:()=>n});var a=r(4848),o=r(6540),l=r(6715);let n=e=>s=>{let r=(0,l.useRouter)(),[n,t]=(0,o.useState)(null);return((0,o.useEffect)(()=>{let e=localStorage.getItem("accessToken");if(e){if("/login"===r.pathname||"/signup"===r.pathname){r.push("/");return}t(e)}else"/login"!==r.pathname&&"/signup"!==r.pathname&&r.push("/login")},[r,n]),n||"/login"===r.pathname||"/signup"===r.pathname)?(0,a.jsx)(e,{...s}):null}},812:(e,s,r)=>{"use strict";r.d(s,{GU:()=>t,Mh:()=>n,Sd:()=>l,X5:()=>o,dr:()=>i});var a=r(4476);let o=a.z.object({email:a.z.string().min(1,"이메일을 입력해 주세요.").email("이메일 형식이 아닙니다."),password:a.z.string().nonempty("비밀번호를 입력해 주세요.").min(6,"비밀번호는 최소 6자 이상이어야 합니다.")}),l=a.z.object({nickName:a.z.string().min(1,{message:"닉네임을 입력해 주세요."}),email:a.z.string().min(1,{message:"이메일을 입력해 주세요."}).email({message:"이메일 형식이 아닙니다."}),phoneNumber:a.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),password:a.z.string().min(6,"비밀번호는 최소 6자 이상이어야 합니다."),confirmPassword:a.z.string().min(1,{message:"비밀번호 확인란을 입력해 주세요."}),role:a.z.enum(["MAKER","DREAMER"],{message:"역할을 선택해 주세요."})}).refine(e=>e.password===e.confirmPassword,{path:["confirmPassword"],message:"비밀번호가 일치하지 않습니다."}),n=a.z.object({nickName:a.z.string().min(1,{message:"닉네임을 입력해 주세요."}),email:a.z.string().min(1,{message:"이메일을 입력해 주세요."}),phoneNumber:a.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),password:a.z.string().optional(),newPassword:a.z.string().optional(),newConfirmPassword:a.z.string().optional(),selectedServices:a.z.array(a.z.string()).optional(),selectedLocations:a.z.array(a.z.string()).optional()}).superRefine((e,s)=>{(e.newPassword||e.newConfirmPassword)&&(e.password||s.addIssue({code:"custom",path:["password"],message:"현재 비밀번호를 입력해 주세요."}),e.newPassword&&e.newPassword.length<6&&s.addIssue({code:"custom",path:["newPassword"],message:"새 비밀번호는 최소 6자 이상이어야 합니다."}),e.newPassword!==e.newConfirmPassword&&s.addIssue({code:"custom",path:["newConfirmPassword"],message:"새 비밀번호가 일치하지 않습니다."}))}),t=a.z.object({nickName:a.z.string().min(1,{message:"닉네임을 입력해 주세요."}),email:a.z.string().min(1,{message:"이메일을 입력해 주세요."}),phoneNumber:a.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),password:a.z.string().optional(),newPassword:a.z.string().optional(),newConfirmPassword:a.z.string().optional()}).refine(e=>!e.newPassword||e.password,{path:["password"],message:"새 비밀번호를 설정하려면 현재 비밀번호를 입력해 주세요."}).refine(e=>!e.newPassword||e.newPassword.length>=6,{path:["newPassword"],message:"새 비밀번호는 최소 6자 이상이어야 합니다."}).refine(e=>!e.newPassword||e.newPassword===e.newConfirmPassword,{path:["newConfirmPassword"],message:"새 비밀번호가 일치하지 않습니다."}),i=a.z.object({nickName:a.z.string().min(1,{message:"닉네임을 입력해 주세요."}),phoneNumber:a.z.string().regex(/^010\d{8}$/,{message:"010으로 시작하고 숫자만 입력해 주세요."}),role:a.z.enum(["MAKER","DREAMER"],{message:"역할을 선택해 주세요."})})}},e=>{var s=s=>e(e.s=s);e.O(0,[106,636,593,792],()=>s(7436)),_N_E=e.O()}]);